<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dimpl Nights at Kill4Pill's</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #000;
    color: #ffffff;
    margin: 0;
    overflow: hidden;
  }

  /* Основной фон */
  #game-container {
    position: relative;
    width: 1600px;
    height: 900px;
    margin: auto;
    background-color: rgb(72, 73, 3);
    overflow: hidden;
    z-index: 1;
  }

  /* Слой Start */
  #start-layer {
    position: relative; /* Добавляем это свойство */
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    z-index: 40; /* Устанавливаем базовый уровень */
  }

  /* Слой Pause */
  #pause-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 38;
  }

  #pause-layer button {
    padding: 20px 40px;
    font-size: 24px;
    color: white;
    border: none;
    cursor: pointer;
    text-transform: uppercase;
    font-weight: bold;
    margin: 10px;
  }

  #continue-button {
    background-color: green;
  }

  #pause-reset-button {
    background-color: red;
  }

  #volume-button {
    background-color: blue;
    text-decoration: none;

  }

  #disclaimer {
    position: absolute;
    top: 20%; 
    left: 45%; 
    transform: translate(-50%, -50%); /* Корректируем центрирование */
    color: white;
    font-size: 18px;
    text-align: center;
    background-color: rgba(255, 0, 0, 0.7); /* Полупрозрачный фон */
    padding: 10px 20px;
    border-radius: 5px;
    z-index: 42; /* Выше видео */
}

  #start-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%; /* Занимает всю ширину */
    height: 100%; /* Занимает всю высоту */
    object-fit: cover; /* Сохраняем пропорции видео */
    z-index: 41; /* Нижний слой */
  }

  #start-button {
    position: absolute;
    top: calc(50% + 40px); 
    left: 45%; 
    transform: translateX(-50%); /* Корректируем центрирование */
    padding: 20px 35px;
    font-size: 23px;
    color: white;
    background-color: rgba(255, 0, 0, 0.7); /* Красный фон */
    border: none;
    border-radius: 5px;
    cursor: pointer;
    z-index: 43; /* Самый верхний слой */
  }
  #start-button:hover {
    background-color: #cc0000; /* Темно-красный при наведении */
  }

  /* Окно камеры */
  #camera-window {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    width: 900px;
    height: 900px;
    overflow: hidden;
    border: 2px solid #fff;
    z-index: 20;
    pointer-events: none;
  }

  /* Слой просмотра камер */
  #cam-view {
    position: fixed;
    top: 45.5%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 900px;
    height: 900px;
    background-color: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(900px);
    -webkit-backdrop-filter: blur(900px);
    display: none;
    z-index: 35;
  }

  /* Область просмотра камеры */
  #camera-view-area {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 800px;
    height: 650px;
    background-color: #333;
    border: 2px solid #fff;
    overflow: hidden;
    background-image: url('img/white-noise2.gif');
    background-size: 100% 100%;
    z-index: 23;
    position: relative;
  }

  /* Кнопка открытия камер */
  #open-cam-btn, #close-cam-btn {
    position: absolute;
    top: 10px;
    padding: 10px;
    background-color: #333;
    color: #fff;
    cursor: pointer;
    pointer-events: auto;
    z-index: 21;
  }

  #open-cam-btn {
    left: 10px;
  }
  #close-cam-btn {
    right: 10px;
  }

  /* Камеры внутри окна */
  .camera {
    position: absolute;
    width: 1600px;
    height: 900px;
    display: none;
    background-size: cover;
    background-position: center;
    z-index: 20;
  }

  /* Движущийся фон с элементами */
  #movable-background {
    position: absolute;
    width: 100%;
    height: 100%;
    transition: transform 0.8s ease-out;
    background: url('img/backBlue.jpeg') no-repeat center center;
    background-size: cover;
  }

  /* Кнопки дверей и света */
  #door-left, #door-right {
    position: absolute;
    top: 170px;
    width: 170px;
    height: 800px;
    cursor: pointer;
    z-index: 3;
  }
  #door-left { left: 2%; }
  #door-right { right: 2%; }

  
  /* Панель управления камерами */
  #cam-buttons {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    z-index: 36;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .cam-btn {
    padding: 15px;
    background-color: #333;
    color: #fff;
    cursor: pointer;
    pointer-events: auto;
    z-index: 45;
    transition: background-color 0.3s, transform 0.1s; /* Add transition for smooth effect */
  }

  .cam-btn.active {
    background-color: rgb(133, 133, 133); /* Change color to red when active */
  }

  .cam-btn:active {
    
    transform: scale(0.95); /* Slightly shrink button on press */
  }

  /* Индикатор энергии */
  #power-bar {
    position: absolute;
    bottom: 10px;
    left: 10px;
    width: 200px;
    height: 30px;
    background-color: #333;
    border: 2px solid #444;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    z-index: 20;
  }
  
  #power-fill {
    width: 100%;
    height: 100%;
    background-color: #17b617;
    transition: width 0.3s linear;
    box-shadow: 0 0 10px rgba(23,182,23,0.5);
  }

  /* Часы */
  #clock {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 24px;
    z-index: 20;
  }
  #nights {
    position: absolute;
    top: 40px;
    right: 10px;
    font-size: 16px;
    z-index: 20;
  }

  /* GAME OVER LAYER */
  #game-over-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 30;
  }

  #game-over {
    font-size: 48px;
    color: red;
    display: block;
  }

  /* Reset button */
  #reset-button {
    top: 55%;
    font-size: 24px;
    color: white;
    background-color: red;
    padding: 10px 20px;
    cursor: pointer;
    display: block; /* Changed from none to block */
    pointer-events: auto;
    z-index: 32;
  }

  /* Twitch-плеер */
  #twitch-player {
    position: absolute;
    top: 10%;
    left: 51%;
    transform: translateX(-50%);
    width: 640px;
    height: 360px;
    background-color: #000;
    z-index: 10;
    border: 2px solid #fff;
  }
  #camera-slider-container {
    position: absolute;
    bottom: 20px;
    width: 100%;
    display: flex;
    justify-content: center;
    z-index: 21;
    pointer-events: auto;
  }

  #camera-slider {
    width: 300px;
    height: 20px;
    -webkit-appearance: none;
    background: #555;
    outline: none;
    border-radius: 0;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
    border: 1px solid #444;
  }

  #camera-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 30px;
    height: 30px;
    background: linear-gradient(to bottom, #888, #666);
    border-radius: 0;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    border: 1px solid #555;
  }

  #camera-slider::-moz-range-thumb {
    width: 30px;
    height: 30px;
    background: linear-gradient(to bottom, #888, #666);
    border-radius: 0;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    border: 1px solid #555;
  }
  /* Кнопки под Twitch-плеером */
  #random-channel-btn,
  #resize-button,
  #vhs-toggle-btn,
  #hard-vhs-btn {
    position: absolute;
    bottom: -55px;
    width: 50px;
    height: 50px;
    padding: 0;
    background-color: #333;
    color: #fff;
    cursor: pointer;
    pointer-events: auto;
    z-index: 21;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12.5px;
  }
  #random-channel-btn {
    right: 0;
  }
  #resize-button {
    right: 60px;
  }
  #vhs-toggle-btn {
    right: 120px;
  }
  #hard-vhs-btn {
    right: 180px;
  }

  /* VHS Effect */
  #vhs-effect {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    mix-blend-mode: overlay;
    overflow: hidden;
  }
  
  /* Hard VHS эффекты для Twitch плеера */
  /* Hard VHS эффекты */
  #vhs-effect.hard-vhs::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      90deg,
      rgba(0, 0, 0, 0.6), /* Усиленная тень */
      rgba(44, 97, 77, 1) 2px, /* Более яркие полосы */
      rgba(0, 0, 0, 0.6) 4px
    );
    animation: hard-vhs-ripple 0.8s infinite linear, hard-vhs-jitter 0.1s infinite alternate; /* Увеличиваем скорость */
    opacity: 0.95;
    filter: contrast(1.5) brightness(1.2);
    pointer-events: none;
  }

  /* Зернистость для Hard VHS */
  #vhs-effect.hard-vhs::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
      /* Зернистость */
      radial-gradient(circle, transparent 0%, rgba(255, 255, 255, 0.2) 1px, transparent 2px),
      /* Случайные пиксели */
      repeating-linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.2) 0px,
        rgba(255, 255, 255, 0.4) 1px,
        transparent 2px,
        transparent 3px
      );
    background-size: 8px 8px;
    opacity: 0.9;
    filter: contrast(1.5);
    animation: hard-vhs-grain 0.1s infinite steps(4), hard-vhs-color-shift 1s infinite alternate; /* Увеличиваем скорость */
    pointer-events: none;
  }

  /* Добавление движущихся VHS-линий */
  #vhs-effect.hard-vhs::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      0deg,
      rgba(255, 255, 255, 0.05) 0px,
      rgba(255, 255, 255, 0.1) 1px,
      transparent 2px,
      transparent 3px
    );
    animation: vhs-line-movement 0.3s infinite linear, vhs-line-jitter 0.1s infinite alternate; /* Движение и дрожание линий */
    mix-blend-mode: overlay; /* Наложение линий на изображение */
    pointer-events: none;
  }

  /* Желтое размытие */
  #vhs-effect.hard-vhs::before {
    filter: blur(10%) hue-rotate(30deg) brightness(1.2); /* Размытие увеличено до 10% */
  }

  /* Анимация горизонтальных полос */
  @keyframes hard-vhs-ripple {
    0% {  transform: translateY(0px); }
    50% { transform: translateY(3px); }
    100% { transform: translateY(0px); }
  }

  /* Анимация трепетания изображения */
  @keyframes hard-vhs-jitter {
    0% { transform: translateX(-2px) scale(0.98); }
    50% { transform: translateX(2px) scale(1.02); }
    100% { transform: translateX(-2px) scale(0.98); }
  }

  /* Анимация зернистости */
  @keyframes hard-vhs-grain {
    0% { transform: translate(0, 0);}
    25% { transform: translate(2px, 2px);}
    50% { transform: translate(-2px, -2px);}
    75% { transform: translate(2px, -2px);}
    100% { transform: translate(0, 0);}
  }

  /* Анимация цветовых искажений */
  @keyframes hard-vhs-color-shift {
    0% { filter: hue-rotate(0deg) contrast(1.5) brightness(1.2); }
    50% { filter: hue-rotate(10deg) contrast(1.6) brightness(1.3); }
    100% { filter: hue-rotate(0deg) contrast(1.5) brightness(1.2);}
  }

  /* Анимация движения VHS-линий */
  @keyframes vhs-line-movement {
    0% { transform: translateY(0px); }
    100% { transform: translateY(10px); /* Линии движутся вниз с большей амплитудой */
    }
  }

  /* Анимация дрожания VHS-линий */
  @keyframes vhs-line-jitter {
    0% { transform: translateX(-1px); }
    50% { transform: translateX(1px); }
    100% { transform: translateX(-1px);}
  }

  

  /* Левый паддинг */
  #left-padding {
    position: fixed;
    top: 0;
    left: 0;
    width: calc(50% - 450px);
    height: 900px;
    background-color: #000;
    z-index: 20;
    pointer-events: auto;
  }
  
  /* Правый паддинг */
  #right-padding {
    position: fixed;
    top: 0;
    right: 0;
    width: calc(50% - 450px);
    height: 900px;
    background-color: #000;
    z-index: 20;
    pointer-events: auto;
  }

  .vhs-line {
    position: absolute;
    width: 100%;
    height: 2px;
    background: rgba(255, 255, 255, 0.4);
    animation: vhs-lines 2s infinite linear;
  }
  .vhs-line:nth-child(1) { top: 10%; }
  .vhs-line:nth-child(2) { top: 30%; }
  .vhs-line:nth-child(3) { top: 50%; }
  .vhs-line:nth-child(4) { top: 70%; }
  .vhs-line:nth-child(5) { top: 90%; }
  .vhs-glitch {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(255, 0, 0, 0.1);
    animation: vhs-glitch 1s infinite steps(5);
  }
  @keyframes vhs-lines {
    0% { transform: translateY(0); }
    100% { transform: translateY(5px); }
  }
  @keyframes vhs-glitch {
    0% { transform: translateX(0); }
    20% { transform: translateX(2px); }
    40% { transform: translateX(-2px); }
    60% { transform: translateX(1px); }
    80% { transform: translateX(-1px); }
    100% { transform: translateX(0); }
  }



/* Эффект плохой камеры */
#camera-view-area::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    /* Зернистость */
    radial-gradient(circle, transparent 0%, rgba(255, 255, 255, 0.3) 1px, transparent 2px),
    /* Помехи */
    repeating-linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.3) 0px, /* Более яркие помехи */
      rgba(255, 255, 255, 0.6) 1px, /* Усиление яркости */
      transparent 2px,
      transparent 3px
    );
  background-size: 8px 8px; /* Размер зернистости */
  opacity: 0.95; /* Увеличиваем интенсивность эффекта */
  pointer-events: none;
  mix-blend-mode: overlay; /* Наложение эффекта */
  animation: camera-grain 0.15s infinite steps(4), dynamic-blur 2s infinite alternate, color-shift 1s infinite alternate;
}

/* Горизонтальные полосы и дрожание */
#camera-view-area::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    0deg,
    rgba(255, 255, 255, 0.1) 0px,
    rgba(255, 255, 255, 0.2) 1px,
    transparent 2px,
    transparent 3px
  );
  opacity: 0.8; /* Интенсивность полос */
  pointer-events: none;
  mix-blend-mode: overlay; /* Наложение эффекта */
  animation: horizontal-lines 0.3s infinite linear, camera-glitch 0.5s infinite steps(5);
}

/* Анимация зернистости */
@keyframes camera-grain {
  0% {transform: translate(0, 0);}
  25% {transform: translate(2px, 2px);}
  50% {transform: translate(-2px, -2px);}
  75% {transform: translate(2px, -2px);}
  100% {transform: translate(0, 0);}
}

/* Анимация помех */
@keyframes camera-glitch {
  0% {transform: translateX(0);}
  20% {transform: translateX(5px);}
  40% {transform: translateX(-5px);}
  60% { transform: translateX(3px); }
  80% { transform: translateX(-3px); }
  100% { transform: translateX(0); }
}

/* Динамическое размытие */
@keyframes dynamic-blur {
  0% { filter: blur(5px); }
  50% { filter: blur(10px); }
  100% { filter: blur(5px); }
}

/* Мерцание цветов */
@keyframes color-shift {
  0% { filter: hue-rotate(0deg) brightness(1.2); }
  50% { filter: hue-rotate(10deg) brightness(1.3); }
  100% { filter: hue-rotate(0deg) brightness(1.2); }
}

/* Дрожание горизонтальных полос */
@keyframes horizontal-lines {
  0% { transform: translateY(0px); }
  50% { transform: translateY(3px); }
  100% { transform: translateY(0px);}
}



/* Анимация движения фона для cam1 */
@keyframes move-background-cam1 {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 100%; }
  100% { background-position: 0% 0%; }
}

/* Применяем анимацию к #camera-view-area при активации cam1 */
#camera-view-area.cam1-active {
  animation: move-background-cam1 55s linear infinite; /* Плавное движение, бесконечно */
}

/* Анимация движения фона для cam2 */
@keyframes move-background-cam2 {
  0% { background-position: 80% 80%; }
  50% { background-position: 50% 50%; }
  85% { background-position: 0% 0%; }
  90% { background-position: 70% 70%; }
  100% { background-position: 80% 80%;}
}

/* Применяем анимацию к #camera-view-area при активации cam2 */
#camera-view-area.cam2-active {
  animation: move-background-cam2 50s linear infinite; /* Плавное движение, бесконечно */
}

/* Анимация движения фона для cam3 */
@keyframes move-background-cam3 {
  0% { background-position: 40% 40%; }
  25% { background-position: 50% 50%; }
  50% { background-position: 60% 60%; }
  75% { background-position: 50% 50%; }
  100% { background-position: 40% 40%;}
}

#camera-view-area.cam3-active {
  animation: move-background-cam3 30s linear infinite;
}

/* Анимация движения фона для cam4 */
@keyframes move-background-cam4 {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 100%; }
  100% { background-position: 0% 0%; }
}

#camera-view-area.cam4-active {
  animation: move-background-cam4 100s linear infinite;
}

/* Анимация движения фона для cam5 */
@keyframes move-background-cam5 {
  0% { background-position: 50% 50%; }
  50% { background-position: 0% 0%; }
  100% { background-position: 50% 50%; }
}

#camera-view-area.cam5-active {
  animation: move-background-cam5 40s linear infinite;
}

/* Анимация движения фона для cam6 */
@keyframes move-background-cam6 {
  0% { background-position: 30% 30%; }
  50% { background-position: 85% 85%; }
  100% { background-position: 30% 30%; }
}

#camera-view-area.cam6-active {
  animation: move-background-cam6 65s linear infinite;
}

/* Анимация движения фона для cam7 */
@keyframes move-background-cam7 {
  0% { background-position: 0% 0%;}
  50% { background-position: 10% 10%;}
  100% { background-position: 0% 0%;}
}

#camera-view-area.cam7-active {
  animation: move-background-cam7 35s linear infinite;
}

/* Кнопка comp-start */
#comp-start {
  position: absolute;
  top: 76%; /* Отступ снизу */
  left: 70%; /* Отступ справа */
  width: 20px; /* Ширина */
  height: 20px; /* Высота */
  background-color: #2130bb; /* Цвет фона */
  color: white; /* Цвет текста */
  border: 2px solid red; /* Обводка красным цветом */
  border-radius: 50%; /* Делаем круглой */
  font-size: 24px; /* Размер иконки */
  cursor: pointer; /* Указатель мыши */
  display: flex; /* Центрирование содержимого */
  align-items: center; /* По вертикали */
  justify-content: center; /* По горизонтали */
  z-index: 9; /* Выше других элементов */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Тень */
}

/* Hover эффект для кнопки */
#comp-start:hover {
  background-color: #6d62fa; /* Темно-красный при наведении */
}

/* Слой survived */
#survived-layer {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 900px; /* Ширина прямоугольника */
  height: 900px; /* Высота прямоугольника */
  display: none; /* Скрыт по умолчанию */
  z-index: 44; /* Выше других элементов */
  text-align: center;
  backdrop-filter: blur(900px); /* Блюр на 900px */
  
}

#survived {
  font-size: 48px;
  color: rgb(255, 0, 0);
  line-height: 900px; /* Центрирование текста по вертикали */
}

#reset-surv {
  position: absolute;
  top: 60%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  color: white;
  background-color: red;
  padding: 10px 20px;
  cursor: pointer;
  display: block; /* Changed from none to block */
  pointer-events: auto;
  z-index: 45;
}

#additional-info {
  position: absolute;
  top: 50%; 
  left: 45%; 
  transform: translate(-50%, -50%); /* Корректируем центрирование */
  color: white;
  font-size: 18px;
  text-align: center;
  background-color: rgba(255, 0, 0, 0.7); /* Полупрозрачный фон */
  padding: 10px 20px;
  border-radius: 5px;
  z-index: 42; /* Выше видео */
}

#donatButton {
  top: 70%;
  font-size: 22px;
  color: white;
  background-color: orange;
  padding: 10px 10px;
  cursor: pointer;
  display: block; /* Changed from none to block */
  pointer-events: auto;
  text-decoration: none;
  z-index: 32;
}

#idea-info {
  position: absolute;
  top: 30%; 
  left: 50%; 
  transform: translate(-50%, -50%); /* Корректируем центрирование */
  color: white;
  font-size: 18px;
  text-align: center;
  background-color: rgba(199, 189, 189, 0.7); /* Полупрозрачный фон */
  padding: 10px 20px;
  border-radius: 5px;
  z-index: 42;
}

</style>
</head>
<body>
<div id="game-container">
  <!-- Survived Layer -->
  <div id="survived-layer">
    <div id="survived">Survived</div>
    <div id="reset-surv" onclick="playClickSound(); startGame()">RESET</div>
  </div>
  
  <!-- Start Layer -->
  <div id="start-layer">
    <video id="start-video" autoplay muted loop>
      <source src="img/k4p.mp4" type="video/mp4">
    </video>
    <div id="disclaimer">
      Игра содержит скримеры, громкие звуки, яркие вспышки, ненормативную лексику, сцены насилия и сексуализированный контент, созданный третьими сторонами. Она предназначена исключительно для лиц старше 21 года.
      Если вы страдаете эпилепсией, светочувствительностью или легко подвержены стрессу, рекомендуется воздержаться от игры. Используйте наушники на низкой громкости и делайте перерывы.
      Разработчики не несут ответственности за любой физический или психологический дискомфорт, возникший в результате взаимодействия с игрой. Игрок полностью берёт на себя ответственность за решение играть.
      Нажимая кнопку "Start" или начав игру, вы подтверждаете, что вам исполнилось 21 год, вы ознакомились с данным предупреждением и принимаете все возможные риски. Если вы не согласны, пожалуйста, воздержитесь от игры.
    </div>
    <div id="additional-info">*Закрытые двери спасают</div> <!-- Added div for additional information -->
    <button id="start-button" onclick="startGame()">START</button>
  </div>

  <!-- Pause Layer -->
  <div id="pause-layer">
    <button id="continue-button" onclick="continueGame()">CONTINUE</button>
    <a href="https://t.me/slowbotstudio" target="_blank">
        <button id="volume-button" onclick="toggleVolume()">telegram</button>
    </a>
  </div>

  <!-- Левый паддинг -->
  <div id="left-padding"></div>
  <!-- Правый паддинг -->
  <div id="right-padding"></div>

  <!-- Движущийся фон с элементами -->
  <div id="movable-background">
    <!-- Кнопки дверей -->
    <div id="door-left"></div>
    <div id="door-right"></div>
    <!-- Кнопка comp-start -->
    <button id="comp-start" onclick="playClickSound()"></button>
    <!-- Twitch-плеер -->
    <div id="twitch-player">
      <iframe 
        id="twitch-iframe"
        src="https://player.twitch.tv/?channel=kill4pill&parent=slowbotstudio.github.io" 
        frameborder="0" 
        allowfullscreen="true" 
        scrolling="no" 
        height="360" 
        width="640">
      </iframe>
      <button id="random-channel-btn" onclick="playClickSound(); changeTwitchChannel()">SKIP</button>
      <button id="resize-button" onclick="playClickSound(); resizeTwitchPlayer()">🔳</button>
      <button id="hard-vhs-btn" onclick="playClickSound(); toggleHardVHSEffects()">HARD VHS OFF</button>
      <button id="vhs-toggle-btn" onclick="playClickSound(); toggleVHSEffects()">VHS ON</button>
      <!-- VHS Effect -->
      <div id="vhs-effect">
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-glitch"></div>
        <div class="vhs-ripple"></div>
        <div class="vhs-grain"></div>
      </div>
    </div>
  </div>

  <!-- Окно камеры -->
  <div id="camera-window">
    <button id="open-cam-btn" onclick="playClickSound(); openCamView()">CAMERAS</button>
    <div id="cam1" class="camera"></div>
    <div id="cam2" class="camera"></div>
    <div id="cam3" class="camera"></div>
    <div id="cam4" class="camera"></div>
    <div id="cam5" class="camera"></div>
    <div id="cam6" class="camera"></div>
    <div id="cam7" class="camera"></div>

    <div id="power-bar"><div id="power-fill"></div></div>
    <div id="camera-slider-container">
      <input 
        type="range" 
        id="camera-slider" 
        min="-350" 
        max="350" 
        value="0" 
        oninput="moveCamera()" 
      />
    </div>
    <div id="clock">12:00 AM</div>
    <div id="nights">Night 1</div> <!-- Added nights display -->
    
    <!-- Game Over Layer -->
    <div id="game-over-layer">
      <div id="idea-info">Dimanlit игра: надо сделать игру 
        типа пять ночей с фреди, 
        чтобы в каморке был телевизор со стримершами 
        и периодически ебака появлялся, 
        это совместит игры и девчонок</div> <!-- Added div for additional information above GAME OVER -->
      <div id="game-over">GAME OVER</div>
      <div id="reset-button" onclick="playClickSound(); startGame()">RESET</div>
      <a href="https://www.donationalerts.com/r/slowbotstudio" target="_blank">
        <button id="donatButton">на кофе</button> <!-- Moved styles to CSS -->
      </a>
    </div>
  </div>

  <!-- Слой просмотра камер -->
  <div id="cam-view">
    <div id="camera-view-area"></div>
    <button id="close-cam-btn" onclick="playClickSound(); closeCamView()">X</button>
    <div id="cam-buttons">
      <div class="cam-btn" id="cam1-btn" onclick="playClickSound(); changeCamera('cam1')">CAM 1</div>
      <div class="cam-btn" id="cam2-btn" onclick="playClickSound(); changeCamera('cam2')">CAM 2</div>
      <div class="cam-btn" id="cam3-btn" onclick="playClickSound(); changeCamera('cam3')">CAM 3</div>
      <div class="cam-btn" id="cam4-btn" onclick="playClickSound(); changeCamera('cam4')">CAM 4</div>
      <div class="cam-btn" id="cam5-btn" onclick="playClickSound(); changeCamera('cam5')">CAM 5</div>
      <div class="cam-btn" id="cam6-btn" onclick="playClickSound(); changeCamera('cam6')">CAM 6</div>
      <div class="cam-btn" id="cam7-btn" onclick="playClickSound(); changeCamera('cam7')">CAM 7</div>
    </div>
  </div>
</div>
<script>
let currentCamera = null;
let power = 100;
let time = 0;
let nights = 1; // Added nights variable
let gameOver = false;
let powerDrain = 0.15;
let gameStarted = false;
let isPaused = false;
let gameInterval;
let freddyInterval;
const twitchChannels = ["korya_mc", "MaryBaby_", "kill4pill", "AlinaRinRin",
  "SATANMATE_", "Sharishaxd", "moranabattoryq", "GloriaMatvien",
  "whylollycry", "mira", "honeyramonaflowers", "evaanaa",
  "mildixs", "yuuechka", "ANGEJlA", "arina_gp",
  "Gilticus", "Lyasyaa", "mugretnug", "nordvi",
  "Lorinefairy", "PomfyChan", "morphe_ya", "tattionme",
  "morphilina", "rootyasha", "nenormova", "LeyaGornaya",
  "fasoollka", "whereisBNN", "di_rubens", "Eiritel",
  "tabula_russia", "akyuliych", "Mabelend", "vikared",
  "katerina999", "k_i_r_a", "DianaRice", "AhriNyan",
  "mash_milash_hub", "NamiNetsu", "B3BRINA", "taybisox",
  "xaritooshka", "gaitur", "olyashaa", "skoomacat",
  "BarbieGirl", "veroniffka", "goleavee", "s1leniel",
  "GAECHKATM", "disnaface", "AlinaNaMeli", "etogabi",
  "CHR1SWAVE", "maryymme", "svetasollarr", "sanechkaya",
  "rudysayuki", "likaxqq", "BULOCHKA", "lumitalle",
  "lyna_com2000", "ELLVI", "xmednis", "Kvashena9",
  "VikiBlade", "soll_dei", "DOIIIUK", "Anannke",
  "Fruktozka", "yuliabaka", "sofigrai0", "keyeren",
  "turboxgirl", "MELKAA", "ekatze007", "juliaagavrilina",
  "mmet", "i_olga", "ypryamkova", "tossibossy",
  "Lipisinkaaa", "tenderlybae", "poliniych", "Cover_Diva",
  "Tangerin", "koshkamoroshka", "Pepelnayaa", "unuasha",
  "zanudA", "AlishaMalinova", "ksyasha", "ant1pat1aXD",
  "balabanova", "KatyaKaisa", "exx1dae", "YULIA_PINKO",
  "Lily_Off_Valley", "heysedaya", "Denly", "vafom",
  "popazik", "nicoleheart23", "eevochka", "f639olya",
  "ai_mori", "by_Owl", "yugybunyg", "busya18plus",
  "iksssy", "panifika", "sony9sha", "Sorabi_",
  "OlesyaBulletka", "iceystellar", "clubnikka", "lilsk8_kitty",
  "yyyyasno", "lyasheva", "grechka_21", "Smorodinova",
  "nepravdopodobno", "valyusha", "RomanovaLera", "niateppa",
  "niateppa", "niateppa", "niateppa", "niateppa",
  "niateppa", "niateppa", "niateppa", "niateppa",
  "A1iberry", "LlNAONE", "51LINA", "duel_allen",
  "leonesan", "keilaqt", "influesii", "dasha228play",
  "DiVenda", "depresonic", "shulochka", "iris",
  "aisumaisu", "Sindics", "lalipinkcheeks", "yakorka",
  "lizabaktt", "meegera", "Yanulya27", "ann_krafts",
  "delaylamy", "havebullet", "mar1oasmr", "manka_a",
  "olyavoodoo", "AVDEECH", "MadaoBloom", "toktpok",
  "TanyaBelkova", "fumimochi", "uuraniummm", "polysladkaya",
  "Cymanneth", "zvezdo4kina", "aHu4oux", "reihatori",
  "NikaYpypy", "STKLV", "nelyaray", "Leron_Baron",
  "JuliaGERASIM", "karachenskaya", "Onutich", "yummy_yum",
  "A_n_i_n_y_a", "miotyan", "lambikq", "milmipl_",
  "voiness"
];
const drummingSound = new Audio('sound/DrummingSticks.ogg');
const horrorSound = new Audio('sound/mainhorror_wEm4wbpx.mp3'); // New horror sound
const clickSound = new Audio('sound/click2.ogg'); // Added click sound
const startSound = new Audio('sound/toiletFlush.ogg'); 
const doorKnockSound = new Audio('sound/elevator_door.wav'); // Added door knock sound variable
const doorCloseSound = new Audio('sound/doorClose_3.ogg'); // Added door close sound

let leftDoorClosed = false; // Added variable to track left door state
let rightDoorClosed = false; // Added variable to track right door state

let activeEvent = -1; // Added active event variable
let lastEvent = -1; // Added last event variable

let cameraImages = [
  "url('img/cam1.jpg')",
  "url('img/cam2.jpeg')",
  "url('img/cam3.jpg')",
  "url('img/cam4.jpg')",
  "url('img/cam5.jpg')",
  "url('img/cam6.jpg')",
  "url('img/cam7.jpg')"
];

const eventSound = 'sound/engine1.ogg'; // Moved sound to a separate variable
const SCREAMER = 'img/screamer.mp4'; // Moved screamer to a separate variable
const screamer = "sound/screamer2.mp3";
const banTwitch = "img/banT.png"

const events = [
  {
    id: 1,
    imgEvent: "url('img/cam1-0.jpg')",
    imgDefault: "url('img/cam1.jpg')",
    sound: eventSound,
    side: 'left'
  },
  {
    id: 2,
    imgEvent: "url('img/cam2-0.jpg')",
    imgDefault: "url('img/cam2.jpeg')",
    sound: eventSound,
    side: 'right'
  },
  {
    id: 3,
    imgEvent: "url('img/cam3-0.jpg')",
    imgDefault: "url('img/cam3.jpg')",
    sound: eventSound,
    side: 'right'
  },
  {
    id: 4,
    imgEvent: "url('img/cam4-0.jpg')",
    imgDefault: "url('img/cam4.jpg')",
    sound: eventSound,
    side: 'right'
  },
  {
    id: 5,
    imgEvent: "url('img/cam5-0.jpg')",
    imgDefault: "url('img/cam5.jpg')",
    sound: eventSound,
    side: 'right'
  },
  {
    id: 6,
    imgEvent: "url('img/cam6-0.jpg')",
    imgDefault: "url('img/cam6.jpg')",
    sound: eventSound,
    side: 'right'
  },
  {
    id: 7,
    imgEvent: "url('img/cam7-0.jpg')",
    imgDefault: "url('img/cam7.jpg')",
    sound: eventSound,
    side: 'left'
  },
  // Add more events as needed
];

function getRandomEvent() {
  let newEvent;
  do {
    newEvent = Math.floor(Math.random() * events.length);
  } while (newEvent === lastEvent || newEvent === activeEvent); // Ensure newEvent is different from both lastEvent and activeEvent
  
  lastEvent = activeEvent; // Update lastEvent to the previous active event
  activeEvent = newEvent; // Store the new event number (1-based index)
  return events[newEvent]; // Return the selected event
}

function startEvent(event) {
  // Заменяем ссылку соответствующей камеры на imgEvent из аргумента
  const cameraIndex = event.id - 1; // Получаем индекс камеры (id - 1)
  if (cameraIndex >= 0 && cameraIndex < cameraImages.length) {
    cameraImages[cameraIndex] = event.imgEvent; // Заменяем ссылку на изображение камеры
  }
  
  // Воспроизводим звук события
  const eventSound = new Audio(event.sound);
  eventSound.play();
}

function endEvent(event) {
  // Заменяем ссылку соответствующей камеры на imgDefault из аргумента
  const cameraIndex = event.id - 1; // Получаем индекс камеры (id - 1)
  if (cameraIndex >= 0 && cameraIndex < cameraImages.length) {
    cameraImages[cameraIndex] = event.imgDefault; // Заменяем ссылку на изображение камеры
  }
  lastEvent = activeEvent; // Update lastEvent to the new event
  activeEvent = -1;
}

function playScreamer(event) {
  const isDoorOpen = (event.side === 'left' && !leftDoorClosed) || (event.side === 'right' && !rightDoorClosed); // Check if the corresponding door is open

  if (isDoorOpen) {
    const screamerVideo = document.createElement('video');
    screamerVideo.src = SCREAMER; // Assuming SCREAMER is a valid video source
    screamerVideo.style.position = 'fixed';
    screamerVideo.style.top = '0';
    screamerVideo.style.left = '0';
    screamerVideo.style.width = '100%';
    screamerVideo.style.height = '100%';
    screamerVideo.style.zIndex = '50'; // Ensure it's on the top layer
    screamerVideo.autoplay = true;
    screamerVideo.muted = false; // Mute the video if needed
    screamerVideo.volume = 0.7;
    document.body.appendChild(screamerVideo);
    
    // Stop the video after it ends
    screamerVideo.onended = () => {
        document.body.removeChild(screamerVideo); // Remove the video from the DOM
        endGame(); // Call the function to handle game over logic
    };
  }
  else {
    doorKnockSound.currentTime = 0; // Ensure to provide the correct path to the sound file
    doorKnockSound.volume = 0.8;
    doorKnockSound.play();
  }
}

function playClickSound() {
  clickSound.volume = 0.9;
  clickSound.currentTime = 0; // Reset sound to start
  clickSound.play();
}

function playStartSound() {
  startSound.volume = 0.7; // Set volume to 70%
  startSound.play();
}

function startGame() {
  playStartSound(); // Play sound when starting the game
  document.getElementById('twitch-player').style.display = 'none'; // Hide twitch-player
  gameStarted = true;
  gameOver = false;
  document.getElementById('start-layer').style.display = 'none';
  drummingSound.pause(); // Stop drumming sound when starting the game
  horrorSound.volume = 0.9; // Set volume for horror sound
  horrorSound.currentTime = 0; // Reset horror sound to start
  horrorSound.play(); // Play horror sound during the game
  document.getElementById('power-fill').style.width = '100%';
  document.getElementById('game-over-layer').style.display = 'none'; // Hide game over layer
  document.getElementById('survived-layer').style.display = 'none';
  document.getElementById('clock').textContent = '12:00 AM';
  document.getElementById('cam-view').style.display = 'none';
  
  // Сброс состояния дверей
  document.getElementById('door-left').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen
  document.getElementById('door-right').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen

  // Reset time and nights for a new game
  time = 0;
  nights = 1; // Reset nights to 1
  document.getElementById('nights').textContent = `Night: ${nights}`; // Update nights display
  // Reset power before starting the game
  power = 100; // Reset power to 100
  // Call playGame to start the game logic after a delay
  setTimeout(playGame, 5000); // 5 seconds delay
}

function playGame() {
  let eventS = getRandomEvent();
  const randEventTime1 = Math.floor(Math.random() * (190 - 100 + 1)) + 100; // Random value between 120 and 200
  const randEventTime2 = Math.floor(Math.random() * (300 - 210 + 1)) + 210; // Random value between 210 and 300
  console.log("random", randEventTime1, randEventTime2)
  // Start game timers only after clicking Start
  gameInterval = setInterval(() => {
    if (!gameOver && gameStarted && !isPaused) {
      updatePower();
      updateTime();
      
      // Call random event at 2 AM and 4 AM
      if (time === randEventTime1 || time === randEventTime2) {
        eventS = getRandomEvent();
        startEvent(eventS); // Send generated event to startEvent
      }
      if (time === (randEventTime1+30) || time === (randEventTime2+30)) {
        endEvent(eventS); // Send generated event to endEvent
        playScreamer(eventS); // Play screamer after handling the event
      }
    }
  }, 1000);

  // Start Freddy movement only after clicking Start
  freddyInterval = setInterval(() => {
    if (!gameOver && gameStarted && !isPaused && Math.random() < 0.1) {
      const cameras = ['cam1', 'cam2', 'cam3', 'cam4', 'cam5', 'cam6', 'cam7'];
      const randomCam = cameras[Math.floor(Math.random() * cameras.length)];
      document.getElementById(randomCam).style.backgroundImage = "url('https://i.imgur.com/your-freddy.jpg')";
      setTimeout(() => {
        document.getElementById(randomCam).style.backgroundImage = '';
      }, 2000);
    }
  }, 5000);
}

// Функция переключения видимости twitch-player
function toggleTwitchPlayer() {
  const twitchPlayer = document.getElementById('twitch-player');
  if (twitchPlayer.style.display === 'none' || twitchPlayer.style.display === '') {
    // Показываем плеер
    twitchPlayer.style.display = 'block';
  } else {
    // Скрываем плеер и вызываем changeTwitchChannel()
    twitchPlayer.style.display = 'none';
    changeTwitchChannel(); // Вызов функции смены канала
  }
}

// Привязываем функцию к кнопке comp-start
document.getElementById('comp-start').addEventListener('click', toggleTwitchPlayer);

// Обработчик нажатия клавиши Esc
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape' && gameStarted && !gameOver) {
    togglePause();
  }
});

function togglePause() {
  isPaused = !isPaused;
  const pauseLayer = document.getElementById('pause-layer');
  pauseLayer.style.display = isPaused ? 'flex' : 'none';
  
  if (isPaused) {
    horrorSound.pause(); // Pause horror sound when game is paused
  } else {
    horrorSound.play(); // Resume horror sound when unpausing
  }
}

function continueGame() {
  playClickSound(); // Play sound when continuing the game
  togglePause();
}

// Двери
document.getElementById('door-left').addEventListener('click', toggleDoorLeft);
document.getElementById('door-right').addEventListener('click', toggleDoorRight);

// Установка начального состояния дверей
document.getElementById('door-left').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen
document.getElementById('door-right').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen

function openCamView() {
  document.getElementById('cam-view').style.display = 'block';
}
function changeCamera(camId) {
  // Скрываем текущую камеру, если она отображается
  if (currentCamera) {
    document.getElementById(currentCamera).style.display = 'none';
    // Reset the button color for the previous camera
    document.getElementById(currentCamera + '-btn').classList.remove('active');
  }

  // Устанавливаем фоновое изображение для camera-view-area на white-noise2.gif
  const cameraViewArea = document.getElementById('camera-view-area');
  cameraViewArea.style.backgroundImage = "url('img/white-noise2.gif')"; // Устанавливаем фоновое изображение по умолчанию
  cameraViewArea.classList.remove(
    'cam1-active',
    'cam2-active',
    'cam3-active',
    'cam4-active',
    'cam5-active',
    'cam6-active',
    'cam7-active'
  ); // Удаляем все классы анимации

  // Используем массив cameraImages для установки фона
  const cameraIndex = parseInt(camId.replace('cam', '')) - 1; // Получаем индекс камеры
  cameraViewArea.style.backgroundImage = cameraImages[cameraIndex]; // Устанавливаем фоновое изображение из массива
  cameraViewArea.classList.add(`${camId}-active`); // Добавляем класс для анимации фона

  // Убедимся, что изображение не выходит за рамки области
  cameraViewArea.style.backgroundSize = 'cover'; // Масштабируем изображение
  cameraViewArea.style.backgroundPosition = 'center'; // Центрируем изображение
  cameraViewArea.style.backgroundRepeat = 'no-repeat'; // Запрещаем повторение

  // Обновляем текущую камеру
  currentCamera = camId;
  // Set the button color for the active camera
  document.getElementById(camId + '-btn').classList.add('active');
}

function closeCamView() {
  document.getElementById('cam-view').style.display = 'none';
  // Deactivate all camera buttons
  const camButtons = document.querySelectorAll('.cam-btn');
  camButtons.forEach(btn => btn.classList.remove('active'));
  
  if (currentCamera) {
    document.getElementById(currentCamera).style.display = 'none';
    currentCamera = null;
  }
}

function toggleDoorLeft() {
  if (!gameStarted || isPaused) return;
  const door = document.getElementById('door-left');
  leftDoorClosed = !leftDoorClosed; // Toggle the state of leftDoorClosed
  door.style.backgroundImage = leftDoorClosed ? "url('img/doorClose.png')" : "url('img/doorOpen.png')"; // Set door image based on state
  door.style.backgroundColor = 'transparent'; // Make the button transparent
  doorCloseSound.currentTime = 0; // Reset sound to start
  doorCloseSound.volume = 0.7;
  doorCloseSound.play(); // Play door close sound
  powerDrain += leftDoorClosed ? 0.5 : -0.5; // Adjust power drain based on door state
}

function toggleDoorRight() {
  if (!gameStarted || isPaused) return;
  const door = document.getElementById('door-right');
  rightDoorClosed = !rightDoorClosed; // Toggle the state of rightDoorClosed
  door.style.backgroundImage = rightDoorClosed ? "url('img/doorClose.png')" : "url('img/doorOpen.png')"; // Set door image based on state
  door.style.backgroundColor = 'transparent'; // Make the button transparent
  doorCloseSound.currentTime = 0; // Reset sound to start
  doorCloseSound.volume = 0.7;
  doorCloseSound.play(); // Play door close sound
  powerDrain += rightDoorClosed ? 0.5 : -0.5; // Adjust power drain based on door state
}

function updatePower() {
  if (power <= 0) {
    // Добавляем случайный ивент
    //const event = getRandomEvent();
    setTimeout(() => {
      const banImage = document.createElement('img');
      banImage.src = banTwitch; // Set the source to the banTwitch image
      banImage.style.position = 'fixed';
      banImage.style.top = '0';
      banImage.style.left = '0';
      banImage.style.width = '100%';
      banImage.style.height = '100%';
      banImage.style.zIndex = '100'; // Ensure it's on the top layer
      document.body.appendChild(banImage); // Add the image to the body

      const screamerAudio = new Audio(screamer); // Create a new audio object for the screamer
      if (!screamerAudio.paused) return; // Check if the audio is already playing
      screamerAudio.volume = 0.3; // Set volume
      screamerAudio.play(); // Play the screamer sound

      screamerAudio.onended = () => {
          document.body.removeChild(banImage); // Remove the banTwitch image after the screamer ends
      };
      endGame(); // Вызов функции endGame после воспроизведения звука
    }, 10000); // Задержка 10 секунд
    return;
  }
  power -= powerDrain;
  document.getElementById('power-fill').style.width = power + '%';
}

function updateTime() {
  time++;
  let hours = Math.floor(time / 60);
  let minutes = time % 60;
  const clock = document.getElementById('clock');
  clock.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')} AM`;
  
  // Update nights count
  if (hours >= 6) {
    nights++; // Increment nights
    document.getElementById('nights').textContent = `Night: ${nights}`; // Update nights display
    if (nights > 5) {
      surviveGame(); // Call surviveGame when all nights are survived
    } else {
      continueNights(); // Call continueNights for the next night
    }
  }
}

function continueNights() {
  playClickSound(); // Play sound when continuing to the next night
  power = 100;
  time = 0;
  document.getElementById('nights').textContent = `Night: ${nights}`; // Keep nights display
  gameOver = false;
  isPaused = false;
  gameStarted = true;
  powerDrain = 0.15;
  
  drummingSound.pause(); // Stop drumming sound when starting the game
  horrorSound.volume = 0.9; // Set volume for horror sound
  horrorSound.currentTime = 0; // Reset horror sound to start
  horrorSound.play();

  document.getElementById('power-fill').style.width = '100%';
  document.getElementById('game-over-layer').style.display = 'none'; // Hide game over layer
  document.getElementById('reset-button').style.display = 'none';
  document.getElementById('clock').textContent = '12:00 AM';
  document.getElementById('cam-view').style.display = 'none';
  document.getElementById('survived-layer').style.display = 'none';
  
  // Сброс состояния дверей
  document.getElementById('door-left').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen
  document.getElementById('door-right').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen
  
  clearInterval(gameInterval);
  clearInterval(freddyInterval);

  playGame(); // Start the game after resetting
}

function endGame() {
  gameOver = true;
  document.getElementById('game-over-layer').style.display = 'flex'; // Show game over layer
  document.getElementById('reset-button').style.display = 'block'; // Ensure RESET button is visible
  clearInterval(gameInterval);
  clearInterval(freddyInterval);
  horrorSound.pause(); // Stop horror sound when game ends
  // Reset game state variables
  gameStarted = false; // Ensure gameStarted is false when game ends
  time = 0; // Reset time
  nights = 1; // Reset nights
  powerDrain = 0.15;
}

function randomTwitchChannel() {
  const randomIndex = Math.floor(Math.random() * twitchChannels.length);
  return twitchChannels[randomIndex];
}

function changeTwitchChannel() {
  const newChannel = randomTwitchChannel();
  const iframe = document.getElementById('twitch-iframe');
  iframe.src = `https://player.twitch.tv/?channel=${newChannel}&parent=slowbotstudio.github.io`;
}

let areVHSEffectsEnabled = true;
let areHardVHSEffectsEnabled = false;

function toggleVHSEffects() {
  const vhsEffect = document.getElementById('vhs-effect');
  const button = document.getElementById('vhs-toggle-btn');
  const hardButton = document.getElementById('hard-vhs-btn');
  
  if (areVHSEffectsEnabled) {
    vhsEffect.style.display = 'none';
    button.textContent = 'VHS OFF';
    areVHSEffectsEnabled = false;
  } else {
    // Если включаем VHS, выключаем Hard VHS
    if (areHardVHSEffectsEnabled) {
      areHardVHSEffectsEnabled = false;
      hardButton.textContent = 'HARD VHS OFF';
      vhsEffect.classList.remove('hard-vhs');
    }
    
    vhsEffect.style.display = 'block';
    button.textContent = 'VHS ON';
    areVHSEffectsEnabled = true;
    
    // Восстанавливаем обычные VHS эффекты
    document.querySelectorAll('.vhs-line').forEach(line => {
      line.style.animation = 'vhs-lines 2s infinite linear';
    });
    document.querySelector('.vhs-glitch').style.animation = 'vhs-glitch 1s infinite steps(5)';
  }
}

function toggleHardVHSEffects() {
  const vhsEffect = document.getElementById('vhs-effect');
  const button = document.getElementById('hard-vhs-btn');
  const normalButton = document.getElementById('vhs-toggle-btn');

  if (areHardVHSEffectsEnabled) {
    // Отключаем Hard VHS эффекты
    vhsEffect.classList.remove('hard-vhs');
    button.textContent = 'HARD VHS OFF';
    areHardVHSEffectsEnabled = false;
    
    // Полностью отключаем все VHS эффекты
    vhsEffect.style.display = 'none';
    normalButton.textContent = 'VHS OFF';
    areVHSEffectsEnabled = false;
  } else {
    // Если включаем Hard VHS, выключаем обычный VHS
    if (areVHSEffectsEnabled) {
      areVHSEffectsEnabled = false;
      normalButton.textContent = 'VHS OFF';
    }
    
    vhsEffect.style.display = 'block';
    vhsEffect.classList.add('hard-vhs');
    button.textContent = 'HARD VHS ON';
    areHardVHSEffectsEnabled = true;
    
    // Применяем эффекты Hard VHS
    document.querySelectorAll('.vhs-line').forEach(line => {
      line.style.animation = 'hard-vhs-lines 0.5s infinite linear';
    });
    document.querySelector('.vhs-glitch').style.animation = 'vhs-glitch 0.25s infinite steps(5)';
  }
}

function moveCamera() {
  const slider = document.getElementById('camera-slider');
  const movableBackground = document.getElementById('movable-background');
  
  // Перемещаем фон и элементы в противоположном направлении
  movableBackground.style.transform = `translateX(${-slider.value}px)`;
}

let isPlayerResized = false;

function resizeTwitchPlayer() {
  const player = document.getElementById('twitch-player');
  const iframe = document.getElementById('twitch-iframe');
  if (isPlayerResized) {
    // Возвращаем исходный размер
    player.style.width = '640px';
    player.style.height = '360px';
    player.style.top = '10%';
    iframe.width = '640';
    iframe.height = '360';
    isPlayerResized = false;
  } else {
    // Увеличиваем размер в два раза
    player.style.width = '1280px';
    player.style.height = '720px';
    player.style.top = '10%';
    iframe.width = '1280';
    iframe.height = '720';
    isPlayerResized = true;
  }
}

// Функция surviveGame
function surviveGame() {
  document.getElementById('survived-layer').style.display = 'block'; // Показываем слой survived
  document.getElementById('reset-surv').style.display = 'block'; // Ensure RESET button is visible
  clearInterval(gameInterval); // Останавливаем игру
  clearInterval(freddyInterval); // Останавливаем движение Фредди
}

// Запускаем звук при загрузке страницы
document.addEventListener('DOMContentLoaded', () => {
  drummingSound.loop = true; // Зацикливаем звук
  drummingSound.volume = 0.4; // Устанавливаем громкость
  drummingSound.play();
  
});

// Останавливаем звук при выходе из start-layer
document.getElementById('start-layer').addEventListener('transitionend', () => {
  if (!gameStarted) {
    drummingSound.pause();
    drummingSound.currentTime = 0; // Сбрасываем время
  }
});

// Зацикливаем звук "sound/DrummingSticks.ogg", когда отображается start-layer
document.getElementById('start-layer').addEventListener('transitionend', () => {
  if (document.getElementById('start-layer').style.display !== 'none') {
    drummingSound.loop = true;
    drummingSound.play();
  }
});
</script>
</body>
</html> 
