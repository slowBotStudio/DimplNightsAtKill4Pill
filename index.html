<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dimpl Nights at Kill4Pill's</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #000;
    color: #ffffff;
    margin: 0;
    overflow: hidden;
  }

  /* Основной фон */
  #game-container {
    position: relative;
    width: 1600px;
    height: 900px;
    margin: auto;
    background-color: rgb(72, 73, 3);
    overflow: hidden;
    z-index: 1;
  }

  /* Слой Start */
  #start-layer {
    position: relative; /* Добавляем это свойство */
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    z-index: 40; /* Устанавливаем базовый уровень */
  }

  /* Слой Pause */
  #pause-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 38;
  }

  #pause-layer button {
    padding: 20px 40px;
    font-size: 24px;
    color: white;
    border: none;
    cursor: pointer;
    text-transform: uppercase;
    font-weight: bold;
    margin: 10px;
  }

  #continue-button {
    background-color: green;
  }

  #pause-reset-button {
    background-color: red;
  }

  #volume-button {
    background-color: blue;
  }

  #disclaimer {
    position: absolute;
    top: 20%; 
    left: 45%; 
    transform: translate(-50%, -50%); /* Корректируем центрирование */
    color: white;
    font-size: 18px;
    text-align: center;
    background-color: rgba(255, 0, 0, 0.7); /* Полупрозрачный фон */
    padding: 10px 20px;
    border-radius: 5px;
    z-index: 42; /* Выше видео */
}

  #start-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%; /* Занимает всю ширину */
    height: 100%; /* Занимает всю высоту */
    object-fit: cover; /* Сохраняем пропорции видео */
    z-index: 41; /* Нижний слой */
  }

  #start-button {
    position: absolute;
    top: calc(40% + 90px); 
    left: 45%; 
    transform: translateX(-50%); /* Корректируем центрирование */
    padding: 20px 35px;
    font-size: 23px;
    color: white;
    background-color: rgba(255, 0, 0, 0.7); /* Красный фон */
    border: none;
    border-radius: 5px;
    cursor: pointer;
    z-index: 43; /* Самый верхний слой */
  }
  #start-button:hover {
    background-color: #cc0000; /* Темно-красный при наведении */
  }

  /* Окно камеры */
  #camera-window {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    width: 900px;
    height: 900px;
    overflow: hidden;
    border: 2px solid #fff;
    z-index: 20;
    pointer-events: none;
  }

  /* Слой просмотра камер */
  #cam-view {
    position: fixed;
    top: 45.5%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 900px;
    height: 900px;
    background-color: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(900px);
    -webkit-backdrop-filter: blur(900px);
    display: none;
    z-index: 35;
  }

  /* Область просмотра камеры */
  #camera-view-area {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 800px;
    height: 650px;
    background-color: #333;
    border: 2px solid #fff;
    overflow: hidden;
    background-image: url('img/white-noise2.gif');
    background-size: 100% 100%;
    z-index: 23;
    position: relative;
  }

  /* Кнопка открытия камер */
  #open-cam-btn, #close-cam-btn {
    position: absolute;
    top: 10px;
    padding: 10px;
    background-color: #333;
    color: #fff;
    cursor: pointer;
    pointer-events: auto;
    z-index: 21;
  }

  #open-cam-btn {
    left: 10px;
  }
  #close-cam-btn {
    right: 10px;
  }

  /* Камеры внутри окна */
  .camera {
    position: absolute;
    width: 1600px;
    height: 900px;
    display: none;
    background-size: cover;
    background-position: center;
    z-index: 20;
  }

  /* Движущийся фон с элементами */
  #movable-background {
    position: absolute;
    width: 100%;
    height: 100%;
    transition: transform 0.8s ease-out;
    background: url('img\\backBlue.jpeg') no-repeat center center;
    background-size: cover;
  }

  /* Кнопки дверей и света */
  #door-left, #door-right {
    position: absolute;
    top: 200px;
    width: 150px;
    height: 200px;
    background-color: rgba(255, 0, 0, 0.5);
    cursor: pointer;
    z-index: 3;
  }
  #door-left { left: 0; }
  #door-right { right: 0; }

  #light-left, #light-right {
    position: absolute;
    top: 180px;
    width: 50px;
    height: 50px;
    background-color: grey;
    border-radius: 50%;
    cursor: pointer;
    z-index: 3;
  }
  #light-left { left: 160px; }
  #light-right { right: 160px; }

  /* Панель управления камерами */
  #cam-buttons {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    z-index: 36;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .cam-btn {
    padding: 15px;
    background-color: #333;
    color: #fff;
    cursor: pointer;
    pointer-events: auto;
    z-index: 45;
    transition: background-color 0.3s, transform 0.1s; /* Add transition for smooth effect */
  }

  .cam-btn:active {
    
    transform: scale(0.95); /* Slightly shrink button on press */
  }

  /* Индикатор энергии */
  #power-bar {
    position: absolute;
    bottom: 10px;
    left: 10px;
    width: 200px;
    height: 30px;
    background-color: #333;
    border: 2px solid #444;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    z-index: 20;
  }
  
  #power-fill {
    width: 100%;
    height: 100%;
    background-color: #17b617;
    transition: width 0.3s linear;
    box-shadow: 0 0 10px rgba(23,182,23,0.5);
  }

  /* Часы */
  #clock {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 24px;
    z-index: 20;
  }

  /* GAME OVER */
  #game-over {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 48px;
    color: red;
    display: none;
    z-index: 30;
  }

  /* Reset button */
  #reset-button {
    position: absolute;
    top: 60%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 24px;
    color: white;
    background-color: red;
    padding: 10px 20px;
    cursor: pointer;
    display: none;
    pointer-events: auto;
    z-index: 32;
  }

  /* Twitch-плеер */
  #twitch-player {
    position: absolute;
    top: 10%;
    left: 51%;
    transform: translateX(-50%);
    width: 640px;
    height: 360px;
    background-color: #000;
    z-index: 10;
    border: 2px solid #fff;
  }
  #camera-slider-container {
    position: absolute;
    bottom: 20px;
    width: 100%;
    display: flex;
    justify-content: center;
    z-index: 21;
    pointer-events: auto;
  }

  #camera-slider {
    width: 300px;
    height: 20px;
    -webkit-appearance: none;
    background: #555;
    outline: none;
    border-radius: 0;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
    border: 1px solid #444;
  }

  #camera-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 30px;
    height: 30px;
    background: linear-gradient(to bottom, #888, #666);
    border-radius: 0;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    border: 1px solid #555;
  }

  #camera-slider::-moz-range-thumb {
    width: 30px;
    height: 30px;
    background: linear-gradient(to bottom, #888, #666);
    border-radius: 0;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    border: 1px solid #555;
  }
  /* Кнопки под Twitch-плеером */
  #random-channel-btn,
  #resize-button,
  #vhs-toggle-btn,
  #hard-vhs-btn {
    position: absolute;
    bottom: -55px;
    width: 50px;
    height: 50px;
    padding: 0;
    background-color: #333;
    color: #fff;
    cursor: pointer;
    pointer-events: auto;
    z-index: 21;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12.5px;
  }
  #random-channel-btn {
    right: 0;
  }
  #resize-button {
    right: 60px;
  }
  #vhs-toggle-btn {
    right: 120px;
  }
  #hard-vhs-btn {
    right: 180px;
  }

  /* VHS Effect */
  #vhs-effect {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    mix-blend-mode: overlay;
    overflow: hidden;
  }
  
  /* Hard VHS эффекты для Twitch плеера */
  /* Hard VHS эффекты */
  #vhs-effect.hard-vhs::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      90deg,
      rgba(0, 0, 0, 0.6), /* Усиленная тень */
      rgba(44, 97, 77, 1) 2px, /* Более яркие полосы */
      rgba(0, 0, 0, 0.6) 4px
    );
    animation: hard-vhs-ripple 0.8s infinite linear, hard-vhs-jitter 0.1s infinite alternate; /* Увеличиваем скорость */
    opacity: 0.95;
    filter: contrast(1.5) brightness(1.2);
    pointer-events: none;
  }

  /* Зернистость для Hard VHS */
  #vhs-effect.hard-vhs::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
      /* Зернистость */
      radial-gradient(circle, transparent 0%, rgba(255, 255, 255, 0.2) 1px, transparent 2px),
      /* Случайные пиксели */
      repeating-linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.2) 0px,
        rgba(255, 255, 255, 0.4) 1px,
        transparent 2px,
        transparent 3px
      );
    background-size: 8px 8px;
    opacity: 0.9;
    filter: contrast(1.5);
    animation: hard-vhs-grain 0.1s infinite steps(4), hard-vhs-color-shift 1s infinite alternate; /* Увеличиваем скорость */
    pointer-events: none;
  }

  /* Добавление движущихся VHS-линий */
  #vhs-effect.hard-vhs::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      0deg,
      rgba(255, 255, 255, 0.05) 0px,
      rgba(255, 255, 255, 0.1) 1px,
      transparent 2px,
      transparent 3px
    );
    animation: vhs-line-movement 0.3s infinite linear, vhs-line-jitter 0.1s infinite alternate; /* Движение и дрожание линий */
    mix-blend-mode: overlay; /* Наложение линий на изображение */
    pointer-events: none;
  }

  /* Желтое размытие */
  #vhs-effect.hard-vhs::before {
    filter: blur(10%) hue-rotate(30deg) brightness(1.2); /* Размытие увеличено до 10% */
  }

  /* Анимация горизонтальных полос */
  @keyframes hard-vhs-ripple {
    0% {  transform: translateY(0px); }
    50% { transform: translateY(3px); }
    100% { transform: translateY(0px); }
  }

  /* Анимация трепетания изображения */
  @keyframes hard-vhs-jitter {
    0% { transform: translateX(-2px) scale(0.98); }
    50% { transform: translateX(2px) scale(1.02); }
    100% { transform: translateX(-2px) scale(0.98); }
  }

  /* Анимация зернистости */
  @keyframes hard-vhs-grain {
    0% { transform: translate(0, 0);}
    25% { transform: translate(2px, 2px);}
    50% { transform: translate(-2px, -2px);}
    75% { transform: translate(2px, -2px);}
    100% { transform: translate(0, 0);}
  }

  /* Анимация цветовых искажений */
  @keyframes hard-vhs-color-shift {
    0% { filter: hue-rotate(0deg) contrast(1.5) brightness(1.2); }
    50% { filter: hue-rotate(10deg) contrast(1.6) brightness(1.3); }
    100% { filter: hue-rotate(0deg) contrast(1.5) brightness(1.2);}
  }

  /* Анимация движения VHS-линий */
  @keyframes vhs-line-movement {
    0% { transform: translateY(0px); }
    100% { transform: translateY(10px); /* Линии движутся вниз с большей амплитудой */
    }
  }

  /* Анимация дрожания VHS-линий */
  @keyframes vhs-line-jitter {
    0% { transform: translateX(-1px); }
    50% { transform: translateX(1px); }
    100% { transform: translateX(-1px);}
  }

  

  /* Левый паддинг */
  #left-padding {
    position: fixed;
    top: 0;
    left: 0;
    width: calc(50% - 450px);
    height: 900px;
    background-color: #000;
    z-index: 20;
    pointer-events: auto;
  }
  
  /* Правый паддинг */
  #right-padding {
    position: fixed;
    top: 0;
    right: 0;
    width: calc(50% - 450px);
    height: 900px;
    background-color: #000;
    z-index: 20;
    pointer-events: auto;
  }

  .vhs-line {
    position: absolute;
    width: 100%;
    height: 2px;
    background: rgba(255, 255, 255, 0.4);
    animation: vhs-lines 2s infinite linear;
  }
  .vhs-line:nth-child(1) { top: 10%; }
  .vhs-line:nth-child(2) { top: 30%; }
  .vhs-line:nth-child(3) { top: 50%; }
  .vhs-line:nth-child(4) { top: 70%; }
  .vhs-line:nth-child(5) { top: 90%; }
  .vhs-glitch {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(255, 0, 0, 0.1);
    animation: vhs-glitch 1s infinite steps(5);
  }
  @keyframes vhs-lines {
    0% { transform: translateY(0); }
    100% { transform: translateY(5px); }
  }
  @keyframes vhs-glitch {
    0% { transform: translateX(0); }
    20% { transform: translateX(2px); }
    40% { transform: translateX(-2px); }
    60% { transform: translateX(1px); }
    80% { transform: translateX(-1px); }
    100% { transform: translateX(0); }
  }



/* Эффект плохой камеры */
#camera-view-area::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    /* Зернистость */
    radial-gradient(circle, transparent 0%, rgba(255, 255, 255, 0.3) 1px, transparent 2px),
    /* Помехи */
    repeating-linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.3) 0px, /* Более яркие помехи */
      rgba(255, 255, 255, 0.6) 1px, /* Усиление яркости */
      transparent 2px,
      transparent 3px
    );
  background-size: 8px 8px; /* Размер зернистости */
  opacity: 0.95; /* Увеличиваем интенсивность эффекта */
  pointer-events: none;
  mix-blend-mode: overlay; /* Наложение эффекта */
  animation: camera-grain 0.15s infinite steps(4), dynamic-blur 2s infinite alternate, color-shift 1s infinite alternate;
}

/* Горизонтальные полосы и дрожание */
#camera-view-area::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    0deg,
    rgba(255, 255, 255, 0.1) 0px,
    rgba(255, 255, 255, 0.2) 1px,
    transparent 2px,
    transparent 3px
  );
  opacity: 0.8; /* Интенсивность полос */
  pointer-events: none;
  mix-blend-mode: overlay; /* Наложение эффекта */
  animation: horizontal-lines 0.3s infinite linear, camera-glitch 0.5s infinite steps(5);
}

/* Анимация зернистости */
@keyframes camera-grain {
  0% {transform: translate(0, 0);}
  25% {transform: translate(2px, 2px);}
  50% {transform: translate(-2px, -2px);}
  75% {transform: translate(2px, -2px);}
  100% {transform: translate(0, 0);}
}

/* Анимация помех */
@keyframes camera-glitch {
  0% {transform: translateX(0);}
  20% {transform: translateX(5px);}
  40% {transform: translateX(-5px);}
  60% { transform: translateX(3px); }
  80% { transform: translateX(-3px); }
  100% { transform: translateX(0); }
}

/* Динамическое размытие */
@keyframes dynamic-blur {
  0% { filter: blur(5px); }
  50% { filter: blur(10px); }
  100% { filter: blur(5px); }
}

/* Мерцание цветов */
@keyframes color-shift {
  0% { filter: hue-rotate(0deg) brightness(1.2); }
  50% { filter: hue-rotate(10deg) brightness(1.3); }
  100% { filter: hue-rotate(0deg) brightness(1.2); }
}

/* Дрожание горизонтальных полос */
@keyframes horizontal-lines {
  0% { transform: translateY(0px); }
  50% { transform: translateY(3px); }
  100% { transform: translateY(0px);}
}



/* Анимация движения фона для cam1 */
@keyframes move-background-cam1 {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 100%; }
  100% { background-position: 0% 0%; }
}

/* Применяем анимацию к #camera-view-area при активации cam1 */
#camera-view-area.cam1-active {
  animation: move-background-cam1 55s linear infinite; /* Плавное движение, бесконечно */
}

/* Анимация движения фона для cam2 */
@keyframes move-background-cam2 {
  0% { background-position: 80% 80%; }
  50% { background-position: 50% 50%; }
  85% { background-position: 0% 0%; }
  90% { background-position: 70% 70%; }
  100% { background-position: 80% 80%;}
}

/* Применяем анимацию к #camera-view-area при активации cam2 */
#camera-view-area.cam2-active {
  animation: move-background-cam2 50s linear infinite; /* Плавное движение, бесконечно */
}

/* Анимация движения фона для cam3 */
@keyframes move-background-cam3 {
  0% { background-position: 40% 40%; }
  25% { background-position: 50% 50%; }
  50% { background-position: 60% 60%; }
  75% { background-position: 50% 50%; }
  100% { background-position: 40% 40%;}
}

#camera-view-area.cam3-active {
  animation: move-background-cam3 30s linear infinite;
}

/* Анимация движения фона для cam4 */
@keyframes move-background-cam4 {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 100%; }
  100% { background-position: 0% 0%; }
}

#camera-view-area.cam4-active {
  animation: move-background-cam4 100s linear infinite;
}

/* Анимация движения фона для cam5 */
@keyframes move-background-cam5 {
  0% { background-position: 50% 50%; }
  50% { background-position: 0% 0%; }
  100% { background-position: 50% 50%; }
}

#camera-view-area.cam5-active {
  animation: move-background-cam5 40s linear infinite;
}

/* Анимация движения фона для cam6 */
@keyframes move-background-cam6 {
  0% { background-position: 0% 0%; }
  50% { background-position: 55% 55%; }
  100% { background-position: 0% 0%; }
}

#camera-view-area.cam6-active {
  animation: move-background-cam6 65s linear infinite;
}

/* Анимация движения фона для cam7 */
@keyframes move-background-cam7 {
  0% { background-position: 0% 0%;}
  50% { background-position: 10% 10%;}
  100% { background-position: 0% 0%;}
}

#camera-view-area.cam7-active {
  animation: move-background-cam7 35s linear infinite;
}

/* Кнопка comp-start */
#comp-start {
  position: absolute;
  top: 76%; /* Отступ снизу */
  left: 70%; /* Отступ справа */
  width: 20px; /* Ширина */
  height: 20px; /* Высота */
  background-color: #2130bb; /* Цвет фона */
  color: white; /* Цвет текста */
  border: 2px solid red; /* Обводка красным цветом */
  border-radius: 50%; /* Делаем круглой */
  font-size: 24px; /* Размер иконки */
  cursor: pointer; /* Указатель мыши */
  display: flex; /* Центрирование содержимого */
  align-items: center; /* По вертикали */
  justify-content: center; /* По горизонтали */
  z-index: 9; /* Выше других элементов */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Тень */
}

/* Hover эффект для кнопки */
#comp-start:hover {
  background-color: #6d62fa; /* Темно-красный при наведении */
}

</style>
</head>
<body>
<div id="game-container">

  <!-- Start Layer -->
  <div id="start-layer">
    <video id="start-video" autoplay muted loop>
      <source src="img/k4p.mp4" type="video/mp4">
    </video>
    <div id="disclaimer">
      Игра содержит скримеры, громкие звуки, яркие вспышки, ненормативную лексику, сцены насилия и сексуализированный контент, созданный третьими сторонами. Она предназначена исключительно для лиц старше 21 года.
      Если вы страдаете эпилепсией, светочувствительностью или легко подвержены стрессу, рекомендуется воздержаться от игры. Используйте наушники на низкой громкости и делайте перерывы.
      Разработчики не несут ответственности за любой физический или психологический дискомфорт, возникший в результате взаимодействия с игрой. Игрок полностью берёт на себя ответственность за решение играть.
      Нажимая кнопку "Start" или начав игру, вы подтверждаете, что вам исполнилось 21 год, вы ознакомились с данным предупреждением и принимаете все возможные риски. Если вы не согласны, пожалуйста, воздержитесь от игры.</div>
    <button id="start-button" onclick="startGame()">START</button>
  </div>

  <!-- Pause Layer -->
  <div id="pause-layer">
    <button id="continue-button" onclick="continueGame()">CONTINUE</button>
    <button id="pause-reset-button" onclick="resetGame()">RESET</button>
    <button id="volume-button" onclick="toggleVolume()">VOLUME</button>
  </div>

  <!-- Левый паддинг -->
  <div id="left-padding"></div>
  <!-- Правый паддинг -->
  <div id="right-padding"></div>

  <!-- Движущийся фон с элементами -->
  <div id="movable-background">
    <!-- Кнопки дверей и света -->
    <div id="door-left"></div>
    <div id="door-right"></div>
    <div id="light-left"></div>
    <div id="light-right"></div>
    <!-- Кнопка comp-start -->
    <button id="comp-start" onclick="playClickSound()"></button>
    <!-- Twitch-плеер -->
    <div id="twitch-player">
      <iframe 
        id="twitch-iframe"
        src="https://player.twitch.tv/?channel=cabbakid&parent=https://slowbotstudio.github.io" 
        frameborder="0" 
        allowfullscreen="true" 
        scrolling="no" 
        height="360" 
        width="640">
      </iframe>
      <button id="random-channel-btn" onclick="playClickSound(); changeTwitchChannel()">SKIP</button>
      <button id="resize-button" onclick="playClickSound(); resizeTwitchPlayer()">🔳</button>
      <button id="hard-vhs-btn" onclick="playClickSound(); toggleHardVHSEffects()">HARD VHS OFF</button>
      <button id="vhs-toggle-btn" onclick="playClickSound(); toggleVHSEffects()">VHS ON</button>
      <!-- VHS Effect -->
      <div id="vhs-effect">
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-glitch"></div>
        <div class="vhs-ripple"></div>
        <div class="vhs-grain"></div>
      </div>
    </div>
  </div>

  <!-- Окно камеры -->
  <div id="camera-window">
    <button id="open-cam-btn" onclick="playClickSound(); openCamView()">CAMERAS</button>
    <div id="cam1" class="camera"></div>
    <div id="cam2" class="camera"></div>
    <div id="cam3" class="camera"></div>
    <div id="cam4" class="camera"></div>
    <div id="cam5" class="camera"></div>
    <div id="cam6" class="camera"></div>
    <div id="cam7" class="camera"></div>

    <div id="power-bar"><div id="power-fill"></div></div>
    <div id="camera-slider-container">
      <input 
        type="range" 
        id="camera-slider" 
        min="-350" 
        max="350" 
        value="0" 
        oninput="moveCamera()" 
      />
    </div>
    <div id="clock">12:00 AM</div>
    <div id="game-over">GAME OVER</div>
    <div id="reset-button" onclick="playClickSound(); resetGame()">RESET</div>
  </div>

  <!-- Слой просмотра камер -->
  <div id="cam-view">
    <div id="camera-view-area"></div>
    <button id="close-cam-btn" onclick="playClickSound(); closeCamView()">X</button>
    <div id="cam-buttons">
      <div class="cam-btn" onclick="playClickSound(); changeCamera('cam1')">CAM 1</div>
      <div class="cam-btn" onclick="playClickSound(); changeCamera('cam2')">CAM 2</div>
      <div class="cam-btn" onclick="playClickSound(); changeCamera('cam3')">CAM 3</div>
      <div class="cam-btn" onclick="playClickSound(); changeCamera('cam4')">CAM 4</div>
      <div class="cam-btn" onclick="playClickSound(); changeCamera('cam5')">CAM 5</div>
      <div class="cam-btn" onclick="playClickSound(); changeCamera('cam6')">CAM 6</div>
      <div class="cam-btn" onclick="playClickSound(); changeCamera('cam7')">CAM 7</div>
    </div>
  </div>
</div>
<script>
let currentCamera = null;
let power = 100;
let time = 0;
let gameOver = false;
let powerDrain = 0.15;
let gameStarted = false;
let isPaused = false;
let gameInterval;
let freddyInterval;
const twitchChannels = ["cabbakid", "arolfish", "kill4pill", "hvorostdumb"];
const drummingSound = new Audio('sound/DrummingSticks.ogg');
const horrorSound = new Audio('sound/mainhorror_wEm4wbpx.mp3'); // New horror sound
const clickSound = new Audio('sound/click2.ogg'); // Added click sound
const startSound = new Audio('sound/toiletFlush.ogg'); 

function playClickSound() {
  clickSound.volume = 0.9;
  clickSound.currentTime = 0; // Reset sound to start
  clickSound.play();
}

function playStartSound() {
  startSound.volume = 0.7; // Set volume to 70%
  startSound.play();
}

function startGame() {
  playStartSound(); // Play sound when starting the game
  document.getElementById('twitch-player').style.display = 'none'; // Hide twitch-player
  gameStarted = true;
  document.getElementById('start-layer').style.display = 'none';
  drummingSound.pause(); // Stop drumming sound when starting the game
  horrorSound.volume = 0.9; // Set volume for horror sound
  horrorSound.currentTime = 0; // Reset horror sound to start
  horrorSound.play(); // Play horror sound during the game

  // Delay the start of the game for 5 seconds
  setTimeout(() => {
    // Start game timers only after clicking Start
    gameInterval = setInterval(() => {
      if (!gameOver && gameStarted && !isPaused) {
        updatePower();
        updateTime();
      }
    }, 1000);

    // Start Freddy movement only after clicking Start
    freddyInterval = setInterval(() => {
      if (!gameOver && gameStarted && !isPaused && Math.random() < 0.1) {
        const cameras = ['cam1', 'cam2', 'cam3', 'cam4', 'cam5', 'cam6', 'cam7'];
        const randomCam = cameras[Math.floor(Math.random() * cameras.length)];
        document.getElementById(randomCam).style.backgroundImage = "url('https://i.imgur.com/your-freddy.jpg')";
        setTimeout(() => {
          document.getElementById(randomCam).style.backgroundImage = '';
        }, 2000);
      }
    }, 5000);
  }, 5000); // 5 seconds delay
}

// Функция переключения видимости twitch-player
function toggleTwitchPlayer() {
  const twitchPlayer = document.getElementById('twitch-player');
  if (twitchPlayer.style.display === 'none' || twitchPlayer.style.display === '') {
    // Показываем плеер
    twitchPlayer.style.display = 'block';
  } else {
    // Скрываем плеер и вызываем changeTwitchChannel()
    twitchPlayer.style.display = 'none';
    changeTwitchChannel(); // Вызов функции смены канала
  }
}

// Привязываем функцию к кнопке comp-start
document.getElementById('comp-start').addEventListener('click', toggleTwitchPlayer);

// Обработчик нажатия клавиши Esc
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape' && gameStarted && !gameOver) {
    togglePause();
  }
});

function togglePause() {
  isPaused = !isPaused;
  const pauseLayer = document.getElementById('pause-layer');
  pauseLayer.style.display = isPaused ? 'flex' : 'none';
  
  if (isPaused) {
    horrorSound.pause(); // Pause horror sound when game is paused
  } else {
    horrorSound.play(); // Resume horror sound when unpausing
  }
}

function continueGame() {
  playClickSound(); // Play sound when continuing the game
  togglePause();
}

// Двери и свет
document.getElementById('door-left').addEventListener('click', toggleDoorLeft);
document.getElementById('door-right').addEventListener('click', toggleDoorRight);
document.getElementById('light-left').addEventListener('click', toggleLightLeft);
document.getElementById('light-right').addEventListener('click', toggleLightRight);

// Установка начального состояния дверей и света
document.getElementById('door-left').style.backgroundColor = 'rgba(255, 0, 0, 0.5)';
document.getElementById('door-right').style.backgroundColor = 'rgba(255, 0, 0, 0.5)';
document.getElementById('light-left').style.backgroundColor = 'gray';
document.getElementById('light-right').style.backgroundColor = 'gray';

function openCamView() {
  document.getElementById('cam-view').style.display = 'block';
}

function changeCamera(camId) {
  // Скрываем текущую камеру, если она отображается
  if (currentCamera) {
    document.getElementById(currentCamera).style.display = 'none';
  }

  // Устанавливаем фоновое изображение для camera-view-area
  const cameraViewArea = document.getElementById('camera-view-area');
  cameraViewArea.classList.remove(
    'cam1-active',
    'cam2-active',
    'cam3-active',
    'cam4-active',
    'cam5-active',
    'cam6-active',
    'cam7-active'
  ); // Удаляем все классы анимации

  if (camId === 'cam1') {
    cameraViewArea.style.backgroundImage = "url('img/cam1.png')";
    cameraViewArea.classList.add('cam1-active'); // Добавляем класс для анимации фона
  } else if (camId === 'cam2') {
    cameraViewArea.style.backgroundImage = "url('img/cam2.png')";
    cameraViewArea.classList.add('cam2-active');
  } else if (camId === 'cam3') {
    cameraViewArea.style.backgroundImage = "url('img/cam3.png')";
    cameraViewArea.classList.add('cam3-active');
  } else if (camId === 'cam4') {
    cameraViewArea.style.backgroundImage = "url('img/cam4.png')";
    cameraViewArea.classList.add('cam4-active');
  } else if (camId === 'cam5') {
    cameraViewArea.style.backgroundImage = "url('img/cam5.png')";
    cameraViewArea.classList.add('cam5-active');
  } else if (camId === 'cam6') {
    cameraViewArea.style.backgroundImage = "url('img/cam6.png')";
    cameraViewArea.classList.add('cam6-active');
  } else if (camId === 'cam7') {
    cameraViewArea.style.backgroundImage = "url('img/cam7.png')";
    cameraViewArea.classList.add('cam7-active');
  }

  // Убедимся, что изображение не выходит за рамки области
  cameraViewArea.style.backgroundSize = 'cover'; // Масштабируем изображение
  cameraViewArea.style.backgroundPosition = 'center'; // Центрируем изображение
  cameraViewArea.style.backgroundRepeat = 'no-repeat'; // Запрещаем повторение

  // Обновляем текущую камеру
  currentCamera = camId;
}

function closeCamView() {
  document.getElementById('cam-view').style.display = 'none';
  if (currentCamera) {
    document.getElementById(currentCamera).style.display = 'none';
    currentCamera = null;
  }
}

function toggleDoorLeft() {
  if (!gameStarted || isPaused) return;
  const door = document.getElementById('door-left');
  const isOpen = door.style.backgroundColor === 'rgba(0, 255, 0, 0.5)';
  door.style.backgroundColor = isOpen ? 'rgba(255, 0, 0, 0.5)' : 'rgba(0, 255, 0, 0.5)';
  powerDrain += isOpen ? -0.125 : 0.125;
}

function toggleDoorRight() {
  if (!gameStarted || isPaused) return;
  const door = document.getElementById('door-right');
  const isOpen = door.style.backgroundColor === 'rgba(0, 255, 0, 0.5)';
  door.style.backgroundColor = isOpen ? 'rgba(255, 0, 0, 0.5)' : 'rgba(0, 255, 0, 0.5)';
  powerDrain += isOpen ? -0.125 : 0.125;
}

function toggleLightLeft() {
  if (!gameStarted || isPaused) return;
  const light = document.getElementById('light-left');
  const isOn = light.style.backgroundColor === 'yellow';
  light.style.backgroundColor = isOn ? 'gray' : 'yellow';
  powerDrain += isOn ? -0.125 : 0.125;
}

function toggleLightRight() {
  if (!gameStarted || isPaused) return;
  const light = document.getElementById('light-right');
  const isOn = light.style.backgroundColor === 'yellow';
  light.style.backgroundColor = isOn ? 'gray' : 'yellow';
  powerDrain += isOn ? -0.125 : 0.125;
}

function updatePower() {
  if (power <= 0) {
    endGame();
    return;
  }
  power -= powerDrain;
  document.getElementById('power-fill').style.width = power + '%';
}

function updateTime() {
  time++;
  let hours = Math.floor(time / 60);
  let minutes = time % 60;
  const clock = document.getElementById('clock');
  clock.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')} AM`;
  if (hours >= 6) {
    alert('You survived!');
    resetGame();
  }
}

function endGame() {
  gameOver = true;
  document.getElementById('game-over').style.display = 'block';
  document.getElementById('reset-button').style.display = 'block';
  clearInterval(gameInterval);
  clearInterval(freddyInterval);
  horrorSound.pause(); // Stop horror sound when game ends
}

function resetGame() {
  playClickSound(); // Play sound when resetting the game
  document.getElementById('twitch-player').style.display = 'none'; // Hide twitch-player
  power = 100;
  time = 0;
  gameOver = false;
  gameStarted = false;
  isPaused = false;
  powerDrain = 0.15;
  document.getElementById('power-fill').style.width = '100%';
  document.getElementById('game-over').style.display = 'none';
  document.getElementById('reset-button').style.display = 'none';
  document.getElementById('clock').textContent = '12:00 AM';
  document.getElementById('start-layer').style.display = 'flex';
  document.getElementById('pause-layer').style.display = 'none';
  document.getElementById('cam-view').style.display = 'none';
  
  // Сброс состояния дверей и света
  document.getElementById('door-left').style.backgroundColor = 'rgba(255, 0, 0, 0.5)';
  document.getElementById('door-right').style.backgroundColor = 'rgba(255, 0, 0, 0.5)';
  document.getElementById('light-left').style.backgroundColor = 'gray';
  document.getElementById('light-right').style.backgroundColor = 'gray';
  
  clearInterval(gameInterval);
  clearInterval(freddyInterval);
}

function randomTwitchChannel() {
  const randomIndex = Math.floor(Math.random() * twitchChannels.length);
  return twitchChannels[randomIndex];
}

function changeTwitchChannel() {
  const newChannel = randomTwitchChannel();
  const iframe = document.getElementById('twitch-iframe');
  iframe.src = `https://player.twitch.tv/?channel=${newChannel}&parent=https://slowbotstudio.github.io`;
}

let areVHSEffectsEnabled = true;
let areHardVHSEffectsEnabled = false;

function toggleVHSEffects() {
  const vhsEffect = document.getElementById('vhs-effect');
  const button = document.getElementById('vhs-toggle-btn');
  const hardButton = document.getElementById('hard-vhs-btn');
  
  if (areVHSEffectsEnabled) {
    vhsEffect.style.display = 'none';
    button.textContent = 'VHS OFF';
    areVHSEffectsEnabled = false;
  } else {
    // Если включаем VHS, выключаем Hard VHS
    if (areHardVHSEffectsEnabled) {
      areHardVHSEffectsEnabled = false;
      hardButton.textContent = 'HARD VHS OFF';
      vhsEffect.classList.remove('hard-vhs');
    }
    
    vhsEffect.style.display = 'block';
    button.textContent = 'VHS ON';
    areVHSEffectsEnabled = true;
    
    // Восстанавливаем обычные VHS эффекты
    document.querySelectorAll('.vhs-line').forEach(line => {
      line.style.animation = 'vhs-lines 2s infinite linear';
    });
    document.querySelector('.vhs-glitch').style.animation = 'vhs-glitch 1s infinite steps(5)';
  }
}

function toggleHardVHSEffects() {
  const vhsEffect = document.getElementById('vhs-effect');
  const button = document.getElementById('hard-vhs-btn');
  const normalButton = document.getElementById('vhs-toggle-btn');

  if (areHardVHSEffectsEnabled) {
    // Отключаем Hard VHS эффекты
    vhsEffect.classList.remove('hard-vhs');
    button.textContent = 'HARD VHS OFF';
    areHardVHSEffectsEnabled = false;
    
    // Полностью отключаем все VHS эффекты
    vhsEffect.style.display = 'none';
    normalButton.textContent = 'VHS OFF';
    areVHSEffectsEnabled = false;
  } else {
    // Если включаем Hard VHS, выключаем обычный VHS
    if (areVHSEffectsEnabled) {
      areVHSEffectsEnabled = false;
      normalButton.textContent = 'VHS OFF';
    }
    
    vhsEffect.style.display = 'block';
    vhsEffect.classList.add('hard-vhs');
    button.textContent = 'HARD VHS ON';
    areHardVHSEffectsEnabled = true;
    
    // Применяем эффекты Hard VHS
    document.querySelectorAll('.vhs-line').forEach(line => {
      line.style.animation = 'hard-vhs-lines 0.5s infinite linear';
    });
    document.querySelector('.vhs-glitch').style.animation = 'vhs-glitch 0.25s infinite steps(5)';
  }
}

function moveCamera() {
  const slider = document.getElementById('camera-slider');
  const movableBackground = document.getElementById('movable-background');
  
  // Перемещаем фон и элементы в противоположном направлении
  movableBackground.style.transform = `translateX(${-slider.value}px)`;
}

let isPlayerResized = false;

function resizeTwitchPlayer() {
  const player = document.getElementById('twitch-player');
  const iframe = document.getElementById('twitch-iframe');
  if (isPlayerResized) {
    // Возвращаем исходный размер
    player.style.width = '640px';
    player.style.height = '360px';
    player.style.top = '10%';
    iframe.width = '640';
    iframe.height = '360';
    isPlayerResized = false;
  } else {
    // Увеличиваем размер в два раза
    player.style.width = '1280px';
    player.style.height = '720px';
    player.style.top = '10%';
    iframe.width = '1280';
    iframe.height = '720';
    isPlayerResized = true;
  }
}
// Запускаем звук при загрузке страницы
document.addEventListener('DOMContentLoaded', () => {
  drummingSound.loop = true; // Зацикливаем звук
  drummingSound.volume = 0.4; // Устанавливаем громкость
  drummingSound.play();
  
});

// Останавливаем звук при выходе из start-layer
document.getElementById('start-layer').addEventListener('transitionend', () => {
  if (!gameStarted) {
    drummingSound.pause();
    drummingSound.currentTime = 0; // Сбрасываем время
  }
});

// Зацикливаем звук "sound/DrummingSticks.ogg", когда отображается start-layer
document.getElementById('start-layer').addEventListener('transitionend', () => {
  if (document.getElementById('start-layer').style.display !== 'none') {
    drummingSound.loop = true;
    drummingSound.play();
  }
});
</script>
</body>
</html>
