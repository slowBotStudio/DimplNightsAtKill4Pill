<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dimpl Nights at Kill4Pill's</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #000;
    color: #ffffff;
    margin: 0;
    overflow: hidden;
  }

  /* –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω */
  #game-container {
    position: relative;
    width: 1600px;
    height: 900px;
    margin: auto;
    background-color: rgb(72, 73, 3);
    overflow: hidden;
    z-index: 1;
  }

  /* –°–ª–æ–π Start */
  #start-layer {
    position: relative; /* –î–æ–±–∞–≤–ª—è–µ–º —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ */
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    z-index: 40; /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å */
  }

  /* –°–ª–æ–π Pause */
  #pause-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 38;
  }

  #pause-layer button {
    padding: 20px 40px;
    font-size: 24px;
    color: white;
    border: none;
    cursor: pointer;
    text-transform: uppercase;
    font-weight: bold;
    margin: 10px;
  }

  #continue-button {
    background-color: green;
  }

  #pause-reset-button {
    background-color: red;
  }

  #volume-button {
    background-color: blue;
    text-decoration: none;

  }

  #disclaimer {
    position: absolute;
    top: 20%; 
    left: 45%; 
    transform: translate(-50%, -50%); /* –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
    color: white;
    font-size: 18px;
    text-align: center;
    background-color: rgba(255, 0, 0, 0.7); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
    padding: 10px 20px;
    border-radius: 5px;
    z-index: 42; /* –í—ã—à–µ –≤–∏–¥–µ–æ */
}

  #start-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É */
    height: 100%; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é –≤—ã—Å–æ—Ç—É */
    object-fit: cover; /* –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ –≤–∏–¥–µ–æ */
    z-index: 41; /* –ù–∏–∂–Ω–∏–π —Å–ª–æ–π */
  }

  #start-button {
    position: absolute;
    top: calc(50% + 40px); 
    left: 45%; 
    transform: translateX(-50%); /* –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
    padding: 20px 35px;
    font-size: 23px;
    color: white;
    background-color: rgba(255, 0, 0, 0.7); /* –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω */
    border: none;
    border-radius: 5px;
    cursor: pointer;
    z-index: 43; /* –°–∞–º—ã–π –≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π */
  }
  #start-button:hover {
    background-color: #cc0000; /* –¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
  }

  /* –û–∫–Ω–æ –∫–∞–º–µ—Ä—ã */
  #camera-window {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    width: 900px;
    height: 900px;
    overflow: hidden;
    border: 2px solid #fff;
    z-index: 20;
    pointer-events: none;
  }

  /* –°–ª–æ–π –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞–º–µ—Ä */
  #cam-view {
    position: fixed;
    top: 45.5%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 900px;
    height: 900px;
    background-color: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(900px);
    -webkit-backdrop-filter: blur(900px);
    display: none;
    z-index: 35;
  }

  /* –û–±–ª–∞—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞–º–µ—Ä—ã */
  #camera-view-area {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 800px;
    height: 650px;
    background-color: #333;
    border: 2px solid #fff;
    overflow: hidden;
    background-image: url('img/white-noise2.gif');
    background-size: 100% 100%;
    z-index: 23;
    position: relative;
  }

  /* –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–∞–º–µ—Ä */
  #open-cam-btn, #close-cam-btn {
    position: absolute;
    top: 10px;
    padding: 10px;
    background-color: #333;
    color: #fff;
    cursor: pointer;
    pointer-events: auto;
    z-index: 21;
  }

  #open-cam-btn {
    left: 10px;
  }
  #close-cam-btn {
    right: 10px;
  }

  /* –ö–∞–º–µ—Ä—ã –≤–Ω—É—Ç—Ä–∏ –æ–∫–Ω–∞ */
  .camera {
    position: absolute;
    width: 1600px;
    height: 900px;
    display: none;
    background-size: cover;
    background-position: center;
    z-index: 20;
  }

  /* –î–≤–∏–∂—É—â–∏–π—Å—è —Ñ–æ–Ω —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
  #movable-background {
    position: absolute;
    width: 100%;
    height: 100%;
    transition: transform 0.8s ease-out;
    background: url('img/backBlue.jpeg') no-repeat center center;
    background-size: cover;
  }

  /* –ö–Ω–æ–ø–∫–∏ –¥–≤–µ—Ä–µ–π –∏ —Å–≤–µ—Ç–∞ */
  #door-left, #door-right {
    position: absolute;
    top: 170px;
    width: 170px;
    height: 800px;
    cursor: pointer;
    z-index: 3;
  }
  #door-left { left: 2%; }
  #door-right { right: 2%; }

  
  /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–∞–º–∏ */
  #cam-buttons {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    z-index: 36;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .cam-btn {
    padding: 15px;
    background-color: #333;
    color: #fff;
    cursor: pointer;
    pointer-events: auto;
    z-index: 45;
    transition: background-color 0.3s, transform 0.1s; /* Add transition for smooth effect */
  }

  .cam-btn.active {
    background-color: rgb(133, 133, 133); /* Change color to red when active */
  }

  .cam-btn:active {
    
    transform: scale(0.95); /* Slightly shrink button on press */
  }

  /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —ç–Ω–µ—Ä–≥–∏–∏ */
  #power-bar {
    position: absolute;
    bottom: 10px;
    left: 10px;
    width: 200px;
    height: 30px;
    background-color: #333;
    border: 2px solid #444;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    z-index: 20;
  }
  
  #power-fill {
    width: 100%;
    height: 100%;
    background-color: #17b617;
    transition: width 0.3s linear;
    box-shadow: 0 0 10px rgba(23,182,23,0.5);
  }

  /* –ß–∞—Å—ã */
  #clock {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 24px;
    z-index: 20;
  }
  #nights {
    position: absolute;
    top: 40px;
    right: 10px;
    font-size: 16px;
    z-index: 20;
  }

  /* GAME OVER LAYER */
  #game-over-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 30;
  }

  #game-over {
    font-size: 48px;
    color: red;
    display: block;
  }

  /* Reset button */
  #reset-button {
    top: 55%;
    font-size: 24px;
    color: white;
    background-color: red;
    padding: 10px 20px;
    cursor: pointer;
    display: block; /* Changed from none to block */
    pointer-events: auto;
    z-index: 32;
  }

  /* Twitch-–ø–ª–µ–µ—Ä */
  #twitch-player {
    position: absolute;
    top: 10%;
    left: 51%;
    transform: translateX(-50%);
    width: 640px;
    height: 360px;
    background-color: #000;
    z-index: 10;
    border: 2px solid #fff;
  }
  #camera-slider-container {
    position: absolute;
    bottom: 20px;
    width: 100%;
    display: flex;
    justify-content: center;
    z-index: 21;
    pointer-events: auto;
  }

  #camera-slider {
    width: 300px;
    height: 20px;
    -webkit-appearance: none;
    background: #555;
    outline: none;
    border-radius: 0;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
    border: 1px solid #444;
  }

  #camera-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 30px;
    height: 30px;
    background: linear-gradient(to bottom, #888, #666);
    border-radius: 0;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    border: 1px solid #555;
  }

  #camera-slider::-moz-range-thumb {
    width: 30px;
    height: 30px;
    background: linear-gradient(to bottom, #888, #666);
    border-radius: 0;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    border: 1px solid #555;
  }
  /* –ö–Ω–æ–ø–∫–∏ –ø–æ–¥ Twitch-–ø–ª–µ–µ—Ä–æ–º */
  #random-channel-btn,
  #resize-button,
  #vhs-toggle-btn,
  #hard-vhs-btn {
    position: absolute;
    bottom: -55px;
    width: 50px;
    height: 50px;
    padding: 0;
    background-color: #333;
    color: #fff;
    cursor: pointer;
    pointer-events: auto;
    z-index: 21;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12.5px;
  }
  #random-channel-btn {
    right: 0;
  }
  #resize-button {
    right: 60px;
  }
  #vhs-toggle-btn {
    right: 120px;
  }
  #hard-vhs-btn {
    right: 180px;
  }

  /* VHS Effect */
  #vhs-effect {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    mix-blend-mode: overlay;
    overflow: hidden;
  }
  
  /* Hard VHS —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è Twitch –ø–ª–µ–µ—Ä–∞ */
  /* Hard VHS —ç—Ñ—Ñ–µ–∫—Ç—ã */
  #vhs-effect.hard-vhs::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      90deg,
      rgba(0, 0, 0, 0.6), /* –£—Å–∏–ª–µ–Ω–Ω–∞—è —Ç–µ–Ω—å */
      rgba(44, 97, 77, 1) 2px, /* –ë–æ–ª–µ–µ —è—Ä–∫–∏–µ –ø–æ–ª–æ—Å—ã */
      rgba(0, 0, 0, 0.6) 4px
    );
    animation: hard-vhs-ripple 0.8s infinite linear, hard-vhs-jitter 0.1s infinite alternate; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å */
    opacity: 0.95;
    filter: contrast(1.5) brightness(1.2);
    pointer-events: none;
  }

  /* –ó–µ—Ä–Ω–∏—Å—Ç–æ—Å—Ç—å –¥–ª—è Hard VHS */
  #vhs-effect.hard-vhs::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
      /* –ó–µ—Ä–Ω–∏—Å—Ç–æ—Å—Ç—å */
      radial-gradient(circle, transparent 0%, rgba(255, 255, 255, 0.2) 1px, transparent 2px),
      /* –°–ª—É—á–∞–π–Ω—ã–µ –ø–∏–∫—Å–µ–ª–∏ */
      repeating-linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.2) 0px,
        rgba(255, 255, 255, 0.4) 1px,
        transparent 2px,
        transparent 3px
      );
    background-size: 8px 8px;
    opacity: 0.9;
    filter: contrast(1.5);
    animation: hard-vhs-grain 0.1s infinite steps(4), hard-vhs-color-shift 1s infinite alternate; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å */
    pointer-events: none;
  }

  /* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂—É—â–∏—Ö—Å—è VHS-–ª–∏–Ω–∏–π */
  #vhs-effect.hard-vhs::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      0deg,
      rgba(255, 255, 255, 0.05) 0px,
      rgba(255, 255, 255, 0.1) 1px,
      transparent 2px,
      transparent 3px
    );
    animation: vhs-line-movement 0.3s infinite linear, vhs-line-jitter 0.1s infinite alternate; /* –î–≤–∏–∂–µ–Ω–∏–µ –∏ –¥—Ä–æ–∂–∞–Ω–∏–µ –ª–∏–Ω–∏–π */
    mix-blend-mode: overlay; /* –ù–∞–ª–æ–∂–µ–Ω–∏–µ –ª–∏–Ω–∏–π –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
    pointer-events: none;
  }

  /* –ñ–µ–ª—Ç–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ */
  #vhs-effect.hard-vhs::before {
    filter: blur(10%) hue-rotate(30deg) brightness(1.2); /* –†–∞–∑–º—ã—Ç–∏–µ —É–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ 10% */
  }

  /* –ê–Ω–∏–º–∞—Ü–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª–æ—Å */
  @keyframes hard-vhs-ripple {
    0% {  transform: translateY(0px); }
    50% { transform: translateY(3px); }
    100% { transform: translateY(0px); }
  }

  /* –ê–Ω–∏–º–∞—Ü–∏—è —Ç—Ä–µ–ø–µ—Ç–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
  @keyframes hard-vhs-jitter {
    0% { transform: translateX(-2px) scale(0.98); }
    50% { transform: translateX(2px) scale(1.02); }
    100% { transform: translateX(-2px) scale(0.98); }
  }

  /* –ê–Ω–∏–º–∞—Ü–∏—è –∑–µ—Ä–Ω–∏—Å—Ç–æ—Å—Ç–∏ */
  @keyframes hard-vhs-grain {
    0% { transform: translate(0, 0);}
    25% { transform: translate(2px, 2px);}
    50% { transform: translate(-2px, -2px);}
    75% { transform: translate(2px, -2px);}
    100% { transform: translate(0, 0);}
  }

  /* –ê–Ω–∏–º–∞—Ü–∏—è —Ü–≤–µ—Ç–æ–≤—ã—Ö –∏—Å–∫–∞–∂–µ–Ω–∏–π */
  @keyframes hard-vhs-color-shift {
    0% { filter: hue-rotate(0deg) contrast(1.5) brightness(1.2); }
    50% { filter: hue-rotate(10deg) contrast(1.6) brightness(1.3); }
    100% { filter: hue-rotate(0deg) contrast(1.5) brightness(1.2);}
  }

  /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è VHS-–ª–∏–Ω–∏–π */
  @keyframes vhs-line-movement {
    0% { transform: translateY(0px); }
    100% { transform: translateY(10px); /* –õ–∏–Ω–∏–∏ –¥–≤–∏–∂—É—Ç—Å—è –≤–Ω–∏–∑ —Å –±–æ–ª—å—à–µ–π –∞–º–ø–ª–∏—Ç—É–¥–æ–π */
    }
  }

  /* –ê–Ω–∏–º–∞—Ü–∏—è –¥—Ä–æ–∂–∞–Ω–∏—è VHS-–ª–∏–Ω–∏–π */
  @keyframes vhs-line-jitter {
    0% { transform: translateX(-1px); }
    50% { transform: translateX(1px); }
    100% { transform: translateX(-1px);}
  }

  

  /* –õ–µ–≤—ã–π –ø–∞–¥–¥–∏–Ω–≥ */
  #left-padding {
    position: fixed;
    top: 0;
    left: 0;
    width: calc(50% - 450px);
    height: 900px;
    background-color: #000;
    z-index: 20;
    pointer-events: auto;
  }
  
  /* –ü—Ä–∞–≤—ã–π –ø–∞–¥–¥–∏–Ω–≥ */
  #right-padding {
    position: fixed;
    top: 0;
    right: 0;
    width: calc(50% - 450px);
    height: 900px;
    background-color: #000;
    z-index: 20;
    pointer-events: auto;
  }

  .vhs-line {
    position: absolute;
    width: 100%;
    height: 2px;
    background: rgba(255, 255, 255, 0.4);
    animation: vhs-lines 2s infinite linear;
  }
  .vhs-line:nth-child(1) { top: 10%; }
  .vhs-line:nth-child(2) { top: 30%; }
  .vhs-line:nth-child(3) { top: 50%; }
  .vhs-line:nth-child(4) { top: 70%; }
  .vhs-line:nth-child(5) { top: 90%; }
  .vhs-glitch {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(255, 0, 0, 0.1);
    animation: vhs-glitch 1s infinite steps(5);
  }
  @keyframes vhs-lines {
    0% { transform: translateY(0); }
    100% { transform: translateY(5px); }
  }
  @keyframes vhs-glitch {
    0% { transform: translateX(0); }
    20% { transform: translateX(2px); }
    40% { transform: translateX(-2px); }
    60% { transform: translateX(1px); }
    80% { transform: translateX(-1px); }
    100% { transform: translateX(0); }
  }



/* –≠—Ñ—Ñ–µ–∫—Ç –ø–ª–æ—Ö–æ–π –∫–∞–º–µ—Ä—ã */
#camera-view-area::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    /* –ó–µ—Ä–Ω–∏—Å—Ç–æ—Å—Ç—å */
    radial-gradient(circle, transparent 0%, rgba(255, 255, 255, 0.3) 1px, transparent 2px),
    /* –ü–æ–º–µ—Ö–∏ */
    repeating-linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.3) 0px, /* –ë–æ–ª–µ–µ —è—Ä–∫–∏–µ –ø–æ–º–µ—Ö–∏ */
      rgba(255, 255, 255, 0.6) 1px, /* –£—Å–∏–ª–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏ */
      transparent 2px,
      transparent 3px
    );
  background-size: 8px 8px; /* –†–∞–∑–º–µ—Ä –∑–µ—Ä–Ω–∏—Å—Ç–æ—Å—Ç–∏ */
  opacity: 0.95; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∞ */
  pointer-events: none;
  mix-blend-mode: overlay; /* –ù–∞–ª–æ–∂–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ */
  animation: camera-grain 0.15s infinite steps(4), dynamic-blur 2s infinite alternate, color-shift 1s infinite alternate;
}

/* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª–æ—Å—ã –∏ –¥—Ä–æ–∂–∞–Ω–∏–µ */
#camera-view-area::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    0deg,
    rgba(255, 255, 255, 0.1) 0px,
    rgba(255, 255, 255, 0.2) 1px,
    transparent 2px,
    transparent 3px
  );
  opacity: 0.8; /* –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª–æ—Å */
  pointer-events: none;
  mix-blend-mode: overlay; /* –ù–∞–ª–æ–∂–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ */
  animation: horizontal-lines 0.3s infinite linear, camera-glitch 0.5s infinite steps(5);
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –∑–µ—Ä–Ω–∏—Å—Ç–æ—Å—Ç–∏ */
@keyframes camera-grain {
  0% {transform: translate(0, 0);}
  25% {transform: translate(2px, 2px);}
  50% {transform: translate(-2px, -2px);}
  75% {transform: translate(2px, -2px);}
  100% {transform: translate(0, 0);}
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–º–µ—Ö */
@keyframes camera-glitch {
  0% {transform: translateX(0);}
  20% {transform: translateX(5px);}
  40% {transform: translateX(-5px);}
  60% { transform: translateX(3px); }
  80% { transform: translateX(-3px); }
  100% { transform: translateX(0); }
}

/* –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ */
@keyframes dynamic-blur {
  0% { filter: blur(5px); }
  50% { filter: blur(10px); }
  100% { filter: blur(5px); }
}

/* –ú–µ—Ä—Ü–∞–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ */
@keyframes color-shift {
  0% { filter: hue-rotate(0deg) brightness(1.2); }
  50% { filter: hue-rotate(10deg) brightness(1.3); }
  100% { filter: hue-rotate(0deg) brightness(1.2); }
}

/* –î—Ä–æ–∂–∞–Ω–∏–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª–æ—Å */
@keyframes horizontal-lines {
  0% { transform: translateY(0px); }
  50% { transform: translateY(3px); }
  100% { transform: translateY(0px);}
}



/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ñ–æ–Ω–∞ –¥–ª—è cam1 */
@keyframes move-background-cam1 {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 100%; }
  100% { background-position: 0% 0%; }
}

/* –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫ #camera-view-area –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ cam1 */
#camera-view-area.cam1-active {
  animation: move-background-cam1 55s linear infinite; /* –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ */
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ñ–æ–Ω–∞ –¥–ª—è cam2 */
@keyframes move-background-cam2 {
  0% { background-position: 80% 80%; }
  50% { background-position: 50% 50%; }
  85% { background-position: 0% 0%; }
  90% { background-position: 70% 70%; }
  100% { background-position: 80% 80%;}
}

/* –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫ #camera-view-area –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ cam2 */
#camera-view-area.cam2-active {
  animation: move-background-cam2 50s linear infinite; /* –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ */
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ñ–æ–Ω–∞ –¥–ª—è cam3 */
@keyframes move-background-cam3 {
  0% { background-position: 40% 40%; }
  25% { background-position: 50% 50%; }
  50% { background-position: 60% 60%; }
  75% { background-position: 50% 50%; }
  100% { background-position: 40% 40%;}
}

#camera-view-area.cam3-active {
  animation: move-background-cam3 30s linear infinite;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ñ–æ–Ω–∞ –¥–ª—è cam4 */
@keyframes move-background-cam4 {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 100%; }
  100% { background-position: 0% 0%; }
}

#camera-view-area.cam4-active {
  animation: move-background-cam4 100s linear infinite;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ñ–æ–Ω–∞ –¥–ª—è cam5 */
@keyframes move-background-cam5 {
  0% { background-position: 50% 50%; }
  50% { background-position: 0% 0%; }
  100% { background-position: 50% 50%; }
}

#camera-view-area.cam5-active {
  animation: move-background-cam5 40s linear infinite;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ñ–æ–Ω–∞ –¥–ª—è cam6 */
@keyframes move-background-cam6 {
  0% { background-position: 30% 30%; }
  50% { background-position: 85% 85%; }
  100% { background-position: 30% 30%; }
}

#camera-view-area.cam6-active {
  animation: move-background-cam6 65s linear infinite;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ñ–æ–Ω–∞ –¥–ª—è cam7 */
@keyframes move-background-cam7 {
  0% { background-position: 0% 0%;}
  50% { background-position: 10% 10%;}
  100% { background-position: 0% 0%;}
}

#camera-view-area.cam7-active {
  animation: move-background-cam7 35s linear infinite;
}

/* –ö–Ω–æ–ø–∫–∞ comp-start */
#comp-start {
  position: absolute;
  top: 76%; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
  left: 70%; /* –û—Ç—Å—Ç—É–ø —Å–ø—Ä–∞–≤–∞ */
  width: 20px; /* –®–∏—Ä–∏–Ω–∞ */
  height: 20px; /* –í—ã—Å–æ—Ç–∞ */
  background-color: #2130bb; /* –¶–≤–µ—Ç —Ñ–æ–Ω–∞ */
  color: white; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
  border: 2px solid red; /* –û–±–≤–æ–¥–∫–∞ –∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º */
  border-radius: 50%; /* –î–µ–ª–∞–µ–º –∫—Ä—É–≥–ª–æ–π */
  font-size: 24px; /* –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ */
  cursor: pointer; /* –£–∫–∞–∑–∞—Ç–µ–ª—å –º—ã—à–∏ */
  display: flex; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ */
  align-items: center; /* –ü–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
  justify-content: center; /* –ü–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
  z-index: 9; /* –í—ã—à–µ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* –¢–µ–Ω—å */
}

/* Hover —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
#comp-start:hover {
  background-color: #6d62fa; /* –¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

/* –°–ª–æ–π survived */
#survived-layer {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 900px; /* –®–∏—Ä–∏–Ω–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ */
  height: 900px; /* –í—ã—Å–æ—Ç–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ */
  display: none; /* –°–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
  z-index: 44; /* –í—ã—à–µ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
  text-align: center;
  backdrop-filter: blur(900px); /* –ë–ª—é—Ä –Ω–∞ 900px */
  
}

#survived {
  font-size: 48px;
  color: rgb(255, 0, 0);
  line-height: 900px; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
}

#reset-surv {
  position: absolute;
  top: 60%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  color: white;
  background-color: red;
  padding: 10px 20px;
  cursor: pointer;
  display: block; /* Changed from none to block */
  pointer-events: auto;
  z-index: 45;
}

#additional-info {
  position: absolute;
  top: 50%; 
  left: 45%; 
  transform: translate(-50%, -50%); /* –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
  color: white;
  font-size: 18px;
  text-align: center;
  background-color: rgba(255, 0, 0, 0.7); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
  padding: 10px 20px;
  border-radius: 5px;
  z-index: 42; /* –í—ã—à–µ –≤–∏–¥–µ–æ */
}

#donatButton {
  top: 70%;
  font-size: 22px;
  color: white;
  background-color: orange;
  padding: 10px 10px;
  cursor: pointer;
  display: block; /* Changed from none to block */
  pointer-events: auto;
  text-decoration: none;
  z-index: 32;
}

#idea-info {
  position: absolute;
  top: 30%; 
  left: 50%; 
  transform: translate(-50%, -50%); /* –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
  color: white;
  font-size: 18px;
  text-align: center;
  background-color: rgba(199, 189, 189, 0.7); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
  padding: 10px 20px;
  border-radius: 5px;
  z-index: 42;
}

</style>
</head>
<body>
<div id="game-container">
  <!-- Survived Layer -->
  <div id="survived-layer">
    <div id="survived">Survived</div>
    <div id="reset-surv" onclick="playClickSound(); startGame()">RESET</div>
  </div>
  
  <!-- Start Layer -->
  <div id="start-layer">
    <video id="start-video" autoplay muted loop>
      <source src="img/k4p.mp4" type="video/mp4">
    </video>
    <div id="disclaimer">
      –ò–≥—Ä–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫—Ä–∏–º–µ—Ä—ã, –≥—Ä–æ–º–∫–∏–µ –∑–≤—É–∫–∏, —è—Ä–∫–∏–µ –≤—Å–ø—ã—à–∫–∏, –Ω–µ–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—É—é –ª–µ–∫—Å–∏–∫—É, —Å—Ü–µ–Ω—ã –Ω–∞—Å–∏–ª–∏—è –∏ —Å–µ–∫—Å—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ç—Ä–µ—Ç—å–∏–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏. –û–Ω–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –ª–∏—Ü —Å—Ç–∞—Ä—à–µ 21 –≥–æ–¥–∞.
      –ï—Å–ª–∏ –≤—ã —Å—Ç—Ä–∞–¥–∞–µ—Ç–µ —ç–ø–∏–ª–µ–ø—Å–∏–µ–π, —Å–≤–µ—Ç–æ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏–ª–∏ –ª–µ–≥–∫–æ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω—ã —Å—Ç—Ä–µ—Å—Å—É, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–æ–∑–¥–µ—Ä–∂–∞—Ç—å—Å—è –æ—Ç –∏–≥—Ä—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—É—à–Ω–∏–∫–∏ –Ω–∞ –Ω–∏–∑–∫–æ–π –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –∏ –¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–µ—Ä—ã–≤—ã.
      –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–µ –Ω–µ—Å—É—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ª—é–±–æ–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∏–ª–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç, –≤–æ–∑–Ω–∏–∫—à–∏–π –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∏–≥—Ä–æ–π. –ò–≥—Ä–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Ä–µ—à–µ–Ω–∏–µ –∏–≥—Ä–∞—Ç—å.
      –ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É "Start" –∏–ª–∏ –Ω–∞—á–∞–≤ –∏–≥—Ä—É, –≤—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ, —á—Ç–æ –≤–∞–º –∏—Å–ø–æ–ª–Ω–∏–ª–æ—Å—å 21 –≥–æ–¥, –≤—ã –æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å —Å –¥–∞–Ω–Ω—ã–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∏—Å–∫–∏. –ï—Å–ª–∏ –≤—ã –Ω–µ —Å–æ–≥–ª–∞—Å–Ω—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–∑–¥–µ—Ä–∂–∏—Ç–µ—Å—å –æ—Ç –∏–≥—Ä—ã.
    </div>
    <div id="additional-info">*–ó–∞–∫—Ä—ã—Ç—ã–µ –¥–≤–µ—Ä–∏ —Å–ø–∞—Å–∞—é—Ç</div> <!-- Added div for additional information -->
    <button id="start-button" onclick="startGame()">START</button>
  </div>

  <!-- Pause Layer -->
  <div id="pause-layer">
    <button id="continue-button" onclick="continueGame()">CONTINUE</button>
    <a href="https://t.me/slowbotstudio" target="_blank">
        <button id="volume-button" onclick="toggleVolume()">telegram</button>
    </a>
  </div>

  <!-- –õ–µ–≤—ã–π –ø–∞–¥–¥–∏–Ω–≥ -->
  <div id="left-padding"></div>
  <!-- –ü—Ä–∞–≤—ã–π –ø–∞–¥–¥–∏–Ω–≥ -->
  <div id="right-padding"></div>

  <!-- –î–≤–∏–∂—É—â–∏–π—Å—è —Ñ–æ–Ω —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ -->
  <div id="movable-background">
    <!-- –ö–Ω–æ–ø–∫–∏ –¥–≤–µ—Ä–µ–π -->
    <div id="door-left"></div>
    <div id="door-right"></div>
    <!-- –ö–Ω–æ–ø–∫–∞ comp-start -->
    <button id="comp-start" onclick="playClickSound()"></button>
    <!-- Twitch-–ø–ª–µ–µ—Ä -->
    <div id="twitch-player">
      <iframe 
        id="twitch-iframe"
        src="https://player.twitch.tv/?channel=kill4pill&parent=slowbotstudio.github.io" 
        frameborder="0" 
        allowfullscreen="true" 
        scrolling="no" 
        height="360" 
        width="640">
      </iframe>
      <button id="random-channel-btn" onclick="playClickSound(); changeTwitchChannel()">SKIP</button>
      <button id="resize-button" onclick="playClickSound(); resizeTwitchPlayer()">üî≥</button>
      <button id="hard-vhs-btn" onclick="playClickSound(); toggleHardVHSEffects()">HARD VHS OFF</button>
      <button id="vhs-toggle-btn" onclick="playClickSound(); toggleVHSEffects()">VHS ON</button>
      <!-- VHS Effect -->
      <div id="vhs-effect">
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-line"></div>
        <div class="vhs-glitch"></div>
        <div class="vhs-ripple"></div>
        <div class="vhs-grain"></div>
      </div>
    </div>
  </div>

  <!-- –û–∫–Ω–æ –∫–∞–º–µ—Ä—ã -->
  <div id="camera-window">
    <button id="open-cam-btn" onclick="playClickSound(); openCamView()">CAMERAS</button>
    <div id="cam1" class="camera"></div>
    <div id="cam2" class="camera"></div>
    <div id="cam3" class="camera"></div>
    <div id="cam4" class="camera"></div>
    <div id="cam5" class="camera"></div>
    <div id="cam6" class="camera"></div>
    <div id="cam7" class="camera"></div>

    <div id="power-bar"><div id="power-fill"></div></div>
    <div id="camera-slider-container">
      <input 
        type="range" 
        id="camera-slider" 
        min="-350" 
        max="350" 
        value="0" 
        oninput="moveCamera()" 
      />
    </div>
    <div id="clock">12:00 AM</div>
    <div id="nights">Night 1</div> <!-- Added nights display -->
    
    <!-- Game Over Layer -->
    <div id="game-over-layer">
      <div id="idea-info">Dimanlit –∏–≥—Ä–∞: –Ω–∞–¥–æ —Å–¥–µ–ª–∞—Ç—å –∏–≥—Ä—É 
        —Ç–∏–ø–∞ –ø—è—Ç—å –Ω–æ—á–µ–π —Å —Ñ—Ä–µ–¥–∏, 
        —á—Ç–æ–±—ã –≤ –∫–∞–º–æ—Ä–∫–µ –±—ã–ª —Ç–µ–ª–µ–≤–∏–∑–æ—Ä —Å–æ —Å—Ç—Ä–∏–º–µ—Ä—à–∞–º–∏ 
        –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –µ–±–∞–∫–∞ –ø–æ—è–≤–ª—è–ª—Å—è, 
        —ç—Ç–æ —Å–æ–≤–º–µ—Å—Ç–∏—Ç –∏–≥—Ä—ã –∏ –¥–µ–≤—á–æ–Ω–æ–∫</div> <!-- Added div for additional information above GAME OVER -->
      <div id="game-over">GAME OVER</div>
      <div id="reset-button" onclick="playClickSound(); startGame()">RESET</div>
      <a href="https://www.donationalerts.com/r/slowbotstudio" target="_blank">
        <button id="donatButton">–Ω–∞ –∫–æ—Ñ–µ</button> <!-- Moved styles to CSS -->
      </a>
    </div>
  </div>

  <!-- –°–ª–æ–π –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞–º–µ—Ä -->
  <div id="cam-view">
    <div id="camera-view-area"></div>
    <button id="close-cam-btn" onclick="playClickSound(); closeCamView()">X</button>
    <div id="cam-buttons">
      <div class="cam-btn" id="cam1-btn" onclick="playClickSound(); changeCamera('cam1')">CAM 1</div>
      <div class="cam-btn" id="cam2-btn" onclick="playClickSound(); changeCamera('cam2')">CAM 2</div>
      <div class="cam-btn" id="cam3-btn" onclick="playClickSound(); changeCamera('cam3')">CAM 3</div>
      <div class="cam-btn" id="cam4-btn" onclick="playClickSound(); changeCamera('cam4')">CAM 4</div>
      <div class="cam-btn" id="cam5-btn" onclick="playClickSound(); changeCamera('cam5')">CAM 5</div>
      <div class="cam-btn" id="cam6-btn" onclick="playClickSound(); changeCamera('cam6')">CAM 6</div>
      <div class="cam-btn" id="cam7-btn" onclick="playClickSound(); changeCamera('cam7')">CAM 7</div>
    </div>
  </div>
</div>
<script>
let currentCamera = null;
let power = 100;
let time = 0;
let nights = 1; // Added nights variable
let gameOver = false;
let powerDrain = 0.15;
let gameStarted = false;
let isPaused = false;
let gameInterval;
let freddyInterval;
const twitchChannels = ["korya_mc", "MaryBaby_", "kill4pill", "AlinaRinRin",
  "SATANMATE_", "Sharishaxd", "moranabattoryq", "GloriaMatvien",
  "whylollycry", "mira", "honeyramonaflowers", "evaanaa",
  "mildixs", "yuuechka", "ANGEJlA", "arina_gp",
  "Gilticus", "Lyasyaa", "mugretnug", "nordvi",
  "Lorinefairy", "PomfyChan", "morphe_ya", "tattionme",
  "morphilina", "rootyasha", "nenormova", "LeyaGornaya",
  "fasoollka", "whereisBNN", "di_rubens", "Eiritel",
  "tabula_russia", "akyuliych", "Mabelend", "vikared",
  "katerina999", "k_i_r_a", "DianaRice", "AhriNyan",
  "mash_milash_hub", "NamiNetsu", "B3BRINA", "taybisox",
  "xaritooshka", "gaitur", "olyashaa", "skoomacat",
  "BarbieGirl", "veroniffka", "goleavee", "s1leniel",
  "GAECHKATM", "disnaface", "AlinaNaMeli", "etogabi",
  "CHR1SWAVE", "maryymme", "svetasollarr", "sanechkaya",
  "rudysayuki", "likaxqq", "BULOCHKA", "lumitalle",
  "lyna_com2000", "ELLVI", "xmednis", "Kvashena9",
  "VikiBlade", "soll_dei", "DOIIIUK", "Anannke",
  "Fruktozka", "yuliabaka", "sofigrai0", "keyeren",
  "turboxgirl", "MELKAA", "ekatze007", "juliaagavrilina",
  "mmet", "i_olga", "ypryamkova", "tossibossy",
  "Lipisinkaaa", "tenderlybae", "poliniych", "Cover_Diva",
  "Tangerin", "koshkamoroshka", "Pepelnayaa", "unuasha",
  "zanudA", "AlishaMalinova", "ksyasha", "ant1pat1aXD",
  "balabanova", "KatyaKaisa", "exx1dae", "YULIA_PINKO",
  "Lily_Off_Valley", "heysedaya", "Denly", "vafom",
  "popazik", "nicoleheart23", "eevochka", "f639olya",
  "ai_mori", "by_Owl", "yugybunyg", "busya18plus",
  "iksssy", "panifika", "sony9sha", "Sorabi_",
  "OlesyaBulletka", "iceystellar", "clubnikka", "lilsk8_kitty",
  "yyyyasno", "lyasheva", "grechka_21", "Smorodinova",
  "nepravdopodobno", "valyusha", "RomanovaLera", "niateppa",
  "niateppa", "niateppa", "niateppa", "niateppa",
  "niateppa", "niateppa", "niateppa", "niateppa",
  "A1iberry", "LlNAONE", "51LINA", "duel_allen",
  "leonesan", "keilaqt", "influesii", "dasha228play",
  "DiVenda", "depresonic", "shulochka", "iris",
  "aisumaisu", "Sindics", "lalipinkcheeks", "yakorka",
  "lizabaktt", "meegera", "Yanulya27", "ann_krafts",
  "delaylamy", "havebullet", "mar1oasmr", "manka_a",
  "olyavoodoo", "AVDEECH", "MadaoBloom", "toktpok",
  "TanyaBelkova", "fumimochi", "uuraniummm", "polysladkaya",
  "Cymanneth", "zvezdo4kina", "aHu4oux", "reihatori",
  "NikaYpypy", "STKLV", "nelyaray", "Leron_Baron",
  "JuliaGERASIM", "karachenskaya", "Onutich", "yummy_yum",
  "A_n_i_n_y_a", "miotyan", "lambikq", "milmipl_",
  "voiness"
];
const drummingSound = new Audio('sound/DrummingSticks.ogg');
const horrorSound = new Audio('sound/mainhorror_wEm4wbpx.mp3'); // New horror sound
const clickSound = new Audio('sound/click2.ogg'); // Added click sound
const startSound = new Audio('sound/toiletFlush.ogg'); 
const doorKnockSound = new Audio('sound/elevator_door.wav'); // Added door knock sound variable
const doorCloseSound = new Audio('sound/doorClose_3.ogg'); // Added door close sound

let leftDoorClosed = false; // Added variable to track left door state
let rightDoorClosed = false; // Added variable to track right door state

let activeEvent = -1; // Added active event variable
let lastEvent = -1; // Added last event variable

let cameraImages = [
  "url('img/cam1.jpg')",
  "url('img/cam2.jpeg')",
  "url('img/cam3.jpg')",
  "url('img/cam4.jpg')",
  "url('img/cam5.jpg')",
  "url('img/cam6.jpg')",
  "url('img/cam7.jpg')"
];

const eventSound = 'sound/engine1.ogg'; // Moved sound to a separate variable
const SCREAMER = 'img/screamer.mp4'; // Moved screamer to a separate variable
const screamer = "sound/screamer2.mp3";
const banTwitch = "img/banT.png"

const events = [
  {
    id: 1,
    imgEvent: "url('img/cam1-0.jpg')",
    imgDefault: "url('img/cam1.jpg')",
    sound: eventSound,
    side: 'left'
  },
  {
    id: 2,
    imgEvent: "url('img/cam2-0.jpg')",
    imgDefault: "url('img/cam2.jpeg')",
    sound: eventSound,
    side: 'right'
  },
  {
    id: 3,
    imgEvent: "url('img/cam3-0.jpg')",
    imgDefault: "url('img/cam3.jpg')",
    sound: eventSound,
    side: 'right'
  },
  {
    id: 4,
    imgEvent: "url('img/cam4-0.jpg')",
    imgDefault: "url('img/cam4.jpg')",
    sound: eventSound,
    side: 'right'
  },
  {
    id: 5,
    imgEvent: "url('img/cam5-0.jpg')",
    imgDefault: "url('img/cam5.jpg')",
    sound: eventSound,
    side: 'right'
  },
  {
    id: 6,
    imgEvent: "url('img/cam6-0.jpg')",
    imgDefault: "url('img/cam6.jpg')",
    sound: eventSound,
    side: 'right'
  },
  {
    id: 7,
    imgEvent: "url('img/cam7-0.jpg')",
    imgDefault: "url('img/cam7.jpg')",
    sound: eventSound,
    side: 'left'
  },
  // Add more events as needed
];

function getRandomEvent() {
  let newEvent;
  do {
    newEvent = Math.floor(Math.random() * events.length);
  } while (newEvent === lastEvent || newEvent === activeEvent); // Ensure newEvent is different from both lastEvent and activeEvent
  
  lastEvent = activeEvent; // Update lastEvent to the previous active event
  activeEvent = newEvent; // Store the new event number (1-based index)
  return events[newEvent]; // Return the selected event
}

function startEvent(event) {
  // –ó–∞–º–µ–Ω—è–µ–º —Å—Å—ã–ª–∫—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–∞–º–µ—Ä—ã –Ω–∞ imgEvent –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞
  const cameraIndex = event.id - 1; // –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–µ–∫—Å –∫–∞–º–µ—Ä—ã (id - 1)
  if (cameraIndex >= 0 && cameraIndex < cameraImages.length) {
    cameraImages[cameraIndex] = event.imgEvent; // –ó–∞–º–µ–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
  }
  
  // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ —Å–æ–±—ã—Ç–∏—è
  const eventSound = new Audio(event.sound);
  eventSound.play();
}

function endEvent(event) {
  // –ó–∞–º–µ–Ω—è–µ–º —Å—Å—ã–ª–∫—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–∞–º–µ—Ä—ã –Ω–∞ imgDefault –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞
  const cameraIndex = event.id - 1; // –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–µ–∫—Å –∫–∞–º–µ—Ä—ã (id - 1)
  if (cameraIndex >= 0 && cameraIndex < cameraImages.length) {
    cameraImages[cameraIndex] = event.imgDefault; // –ó–∞–º–µ–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
  }
  lastEvent = activeEvent; // Update lastEvent to the new event
  activeEvent = -1;
}

function playScreamer(event) {
  const isDoorOpen = (event.side === 'left' && !leftDoorClosed) || (event.side === 'right' && !rightDoorClosed); // Check if the corresponding door is open

  if (isDoorOpen) {
    const screamerVideo = document.createElement('video');
    screamerVideo.src = SCREAMER; // Assuming SCREAMER is a valid video source
    screamerVideo.style.position = 'fixed';
    screamerVideo.style.top = '0';
    screamerVideo.style.left = '0';
    screamerVideo.style.width = '100%';
    screamerVideo.style.height = '100%';
    screamerVideo.style.zIndex = '50'; // Ensure it's on the top layer
    screamerVideo.autoplay = true;
    screamerVideo.muted = false; // Mute the video if needed
    screamerVideo.volume = 0.7;
    document.body.appendChild(screamerVideo);
    
    // Stop the video after it ends
    screamerVideo.onended = () => {
        document.body.removeChild(screamerVideo); // Remove the video from the DOM
        endGame(); // Call the function to handle game over logic
    };
  }
  else {
    doorKnockSound.currentTime = 0; // Ensure to provide the correct path to the sound file
    doorKnockSound.volume = 0.8;
    doorKnockSound.play();
  }
}

function playClickSound() {
  clickSound.volume = 0.9;
  clickSound.currentTime = 0; // Reset sound to start
  clickSound.play();
}

function playStartSound() {
  startSound.volume = 0.7; // Set volume to 70%
  startSound.play();
}

function startGame() {
  playStartSound(); // Play sound when starting the game
  document.getElementById('twitch-player').style.display = 'none'; // Hide twitch-player
  gameStarted = true;
  gameOver = false;
  document.getElementById('start-layer').style.display = 'none';
  drummingSound.pause(); // Stop drumming sound when starting the game
  horrorSound.volume = 0.9; // Set volume for horror sound
  horrorSound.currentTime = 0; // Reset horror sound to start
  horrorSound.play(); // Play horror sound during the game
  document.getElementById('power-fill').style.width = '100%';
  document.getElementById('game-over-layer').style.display = 'none'; // Hide game over layer
  document.getElementById('survived-layer').style.display = 'none';
  document.getElementById('clock').textContent = '12:00 AM';
  document.getElementById('cam-view').style.display = 'none';
  
  // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–≤–µ—Ä–µ–π
  document.getElementById('door-left').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen
  document.getElementById('door-right').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen

  // Reset time and nights for a new game
  time = 0;
  nights = 1; // Reset nights to 1
  document.getElementById('nights').textContent = `Night: ${nights}`; // Update nights display
  // Reset power before starting the game
  power = 100; // Reset power to 100
  // Call playGame to start the game logic after a delay
  setTimeout(playGame, 5000); // 5 seconds delay
}

function playGame() {
  let eventS = getRandomEvent();
  const randEventTime1 = Math.floor(Math.random() * (190 - 100 + 1)) + 100; // Random value between 120 and 200
  const randEventTime2 = Math.floor(Math.random() * (300 - 210 + 1)) + 210; // Random value between 210 and 300
  console.log("random", randEventTime1, randEventTime2)
  // Start game timers only after clicking Start
  gameInterval = setInterval(() => {
    if (!gameOver && gameStarted && !isPaused) {
      updatePower();
      updateTime();
      
      // Call random event at 2 AM and 4 AM
      if (time === randEventTime1 || time === randEventTime2) {
        eventS = getRandomEvent();
        startEvent(eventS); // Send generated event to startEvent
      }
      if (time === (randEventTime1+30) || time === (randEventTime2+30)) {
        endEvent(eventS); // Send generated event to endEvent
        playScreamer(eventS); // Play screamer after handling the event
      }
    }
  }, 1000);

  // Start Freddy movement only after clicking Start
  freddyInterval = setInterval(() => {
    if (!gameOver && gameStarted && !isPaused && Math.random() < 0.1) {
      const cameras = ['cam1', 'cam2', 'cam3', 'cam4', 'cam5', 'cam6', 'cam7'];
      const randomCam = cameras[Math.floor(Math.random() * cameras.length)];
      document.getElementById(randomCam).style.backgroundImage = "url('https://i.imgur.com/your-freddy.jpg')";
      setTimeout(() => {
        document.getElementById(randomCam).style.backgroundImage = '';
      }, 2000);
    }
  }, 5000);
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ twitch-player
function toggleTwitchPlayer() {
  const twitchPlayer = document.getElementById('twitch-player');
  if (twitchPlayer.style.display === 'none' || twitchPlayer.style.display === '') {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–ª–µ–µ—Ä
    twitchPlayer.style.display = 'block';
  } else {
    // –°–∫—Ä—ã–≤–∞–µ–º –ø–ª–µ–µ—Ä –∏ –≤—ã–∑—ã–≤–∞–µ–º changeTwitchChannel()
    twitchPlayer.style.display = 'none';
    changeTwitchChannel(); // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–º–µ–Ω—ã –∫–∞–Ω–∞–ª–∞
  }
}

// –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∫ –∫–Ω–æ–ø–∫–µ comp-start
document.getElementById('comp-start').addEventListener('click', toggleTwitchPlayer);

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à–∏ Esc
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape' && gameStarted && !gameOver) {
    togglePause();
  }
});

function togglePause() {
  isPaused = !isPaused;
  const pauseLayer = document.getElementById('pause-layer');
  pauseLayer.style.display = isPaused ? 'flex' : 'none';
  
  if (isPaused) {
    horrorSound.pause(); // Pause horror sound when game is paused
  } else {
    horrorSound.play(); // Resume horror sound when unpausing
  }
}

function continueGame() {
  playClickSound(); // Play sound when continuing the game
  togglePause();
}

// –î–≤–µ—Ä–∏
document.getElementById('door-left').addEventListener('click', toggleDoorLeft);
document.getElementById('door-right').addEventListener('click', toggleDoorRight);

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–≤–µ—Ä–µ–π
document.getElementById('door-left').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen
document.getElementById('door-right').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen

function openCamView() {
  document.getElementById('cam-view').style.display = 'block';
}
function changeCamera(camId) {
  // –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–∞–º–µ—Ä—É, –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
  if (currentCamera) {
    document.getElementById(currentCamera).style.display = 'none';
    // Reset the button color for the previous camera
    document.getElementById(currentCamera + '-btn').classList.remove('active');
  }

  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è camera-view-area –Ω–∞ white-noise2.gif
  const cameraViewArea = document.getElementById('camera-view-area');
  cameraViewArea.style.backgroundImage = "url('img/white-noise2.gif')"; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  cameraViewArea.classList.remove(
    'cam1-active',
    'cam2-active',
    'cam3-active',
    'cam4-active',
    'cam5-active',
    'cam6-active',
    'cam7-active'
  ); // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–∏

  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–∞—Å—Å–∏–≤ cameraImages –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–æ–Ω–∞
  const cameraIndex = parseInt(camId.replace('cam', '')) - 1; // –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–µ–∫—Å –∫–∞–º–µ—Ä—ã
  cameraViewArea.style.backgroundImage = cameraImages[cameraIndex]; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞
  cameraViewArea.classList.add(`${camId}-active`); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Ñ–æ–Ω–∞

  // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–º–∫–∏ –æ–±–ª–∞—Å—Ç–∏
  cameraViewArea.style.backgroundSize = 'cover'; // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  cameraViewArea.style.backgroundPosition = 'center'; // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  cameraViewArea.style.backgroundRepeat = 'no-repeat'; // –ó–∞–ø—Ä–µ—â–∞–µ–º –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ

  // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –∫–∞–º–µ—Ä—É
  currentCamera = camId;
  // Set the button color for the active camera
  document.getElementById(camId + '-btn').classList.add('active');
}

function closeCamView() {
  document.getElementById('cam-view').style.display = 'none';
  // Deactivate all camera buttons
  const camButtons = document.querySelectorAll('.cam-btn');
  camButtons.forEach(btn => btn.classList.remove('active'));
  
  if (currentCamera) {
    document.getElementById(currentCamera).style.display = 'none';
    currentCamera = null;
  }
}

function toggleDoorLeft() {
  if (!gameStarted || isPaused) return;
  const door = document.getElementById('door-left');
  leftDoorClosed = !leftDoorClosed; // Toggle the state of leftDoorClosed
  door.style.backgroundImage = leftDoorClosed ? "url('img/doorClose.png')" : "url('img/doorOpen.png')"; // Set door image based on state
  door.style.backgroundColor = 'transparent'; // Make the button transparent
  doorCloseSound.currentTime = 0; // Reset sound to start
  doorCloseSound.volume = 0.7;
  doorCloseSound.play(); // Play door close sound
  powerDrain += leftDoorClosed ? 0.5 : -0.5; // Adjust power drain based on door state
}

function toggleDoorRight() {
  if (!gameStarted || isPaused) return;
  const door = document.getElementById('door-right');
  rightDoorClosed = !rightDoorClosed; // Toggle the state of rightDoorClosed
  door.style.backgroundImage = rightDoorClosed ? "url('img/doorClose.png')" : "url('img/doorOpen.png')"; // Set door image based on state
  door.style.backgroundColor = 'transparent'; // Make the button transparent
  doorCloseSound.currentTime = 0; // Reset sound to start
  doorCloseSound.volume = 0.7;
  doorCloseSound.play(); // Play door close sound
  powerDrain += rightDoorClosed ? 0.5 : -0.5; // Adjust power drain based on door state
}

function updatePower() {
  if (power <= 0) {
    // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –∏–≤–µ–Ω—Ç
    //const event = getRandomEvent();
    setTimeout(() => {
      const banImage = document.createElement('img');
      banImage.src = banTwitch; // Set the source to the banTwitch image
      banImage.style.position = 'fixed';
      banImage.style.top = '0';
      banImage.style.left = '0';
      banImage.style.width = '100%';
      banImage.style.height = '100%';
      banImage.style.zIndex = '100'; // Ensure it's on the top layer
      document.body.appendChild(banImage); // Add the image to the body

      const screamerAudio = new Audio(screamer); // Create a new audio object for the screamer
      if (!screamerAudio.paused) return; // Check if the audio is already playing
      screamerAudio.volume = 0.3; // Set volume
      screamerAudio.play(); // Play the screamer sound

      screamerAudio.onended = () => {
          document.body.removeChild(banImage); // Remove the banTwitch image after the screamer ends
      };
      endGame(); // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ endGame –ø–æ—Å–ª–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞
    }, 10000); // –ó–∞–¥–µ—Ä–∂–∫–∞ 10 —Å–µ–∫—É–Ω–¥
    return;
  }
  power -= powerDrain;
  document.getElementById('power-fill').style.width = power + '%';
}

function updateTime() {
  time++;
  let hours = Math.floor(time / 60);
  let minutes = time % 60;
  const clock = document.getElementById('clock');
  clock.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')} AM`;
  
  // Update nights count
  if (hours >= 6) {
    nights++; // Increment nights
    document.getElementById('nights').textContent = `Night: ${nights}`; // Update nights display
    if (nights > 5) {
      surviveGame(); // Call surviveGame when all nights are survived
    } else {
      continueNights(); // Call continueNights for the next night
    }
  }
}

function continueNights() {
  playClickSound(); // Play sound when continuing to the next night
  power = 100;
  time = 0;
  document.getElementById('nights').textContent = `Night: ${nights}`; // Keep nights display
  gameOver = false;
  isPaused = false;
  gameStarted = true;
  powerDrain = 0.15;
  
  drummingSound.pause(); // Stop drumming sound when starting the game
  horrorSound.volume = 0.9; // Set volume for horror sound
  horrorSound.currentTime = 0; // Reset horror sound to start
  horrorSound.play();

  document.getElementById('power-fill').style.width = '100%';
  document.getElementById('game-over-layer').style.display = 'none'; // Hide game over layer
  document.getElementById('reset-button').style.display = 'none';
  document.getElementById('clock').textContent = '12:00 AM';
  document.getElementById('cam-view').style.display = 'none';
  document.getElementById('survived-layer').style.display = 'none';
  
  // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–≤–µ—Ä–µ–π
  document.getElementById('door-left').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen
  document.getElementById('door-right').style.backgroundImage = "url('img/doorOpen.png')"; // Set default image to doorOpen
  
  clearInterval(gameInterval);
  clearInterval(freddyInterval);

  playGame(); // Start the game after resetting
}

function endGame() {
  gameOver = true;
  document.getElementById('game-over-layer').style.display = 'flex'; // Show game over layer
  document.getElementById('reset-button').style.display = 'block'; // Ensure RESET button is visible
  clearInterval(gameInterval);
  clearInterval(freddyInterval);
  horrorSound.pause(); // Stop horror sound when game ends
  // Reset game state variables
  gameStarted = false; // Ensure gameStarted is false when game ends
  time = 0; // Reset time
  nights = 1; // Reset nights
  powerDrain = 0.15;
}

function randomTwitchChannel() {
  const randomIndex = Math.floor(Math.random() * twitchChannels.length);
  return twitchChannels[randomIndex];
}

function changeTwitchChannel() {
  const newChannel = randomTwitchChannel();
  const iframe = document.getElementById('twitch-iframe');
  iframe.src = `https://player.twitch.tv/?channel=${newChannel}&parent=slowbotstudio.github.io`;
}

let areVHSEffectsEnabled = true;
let areHardVHSEffectsEnabled = false;

function toggleVHSEffects() {
  const vhsEffect = document.getElementById('vhs-effect');
  const button = document.getElementById('vhs-toggle-btn');
  const hardButton = document.getElementById('hard-vhs-btn');
  
  if (areVHSEffectsEnabled) {
    vhsEffect.style.display = 'none';
    button.textContent = 'VHS OFF';
    areVHSEffectsEnabled = false;
  } else {
    // –ï—Å–ª–∏ –≤–∫–ª—é—á–∞–µ–º VHS, –≤—ã–∫–ª—é—á–∞–µ–º Hard VHS
    if (areHardVHSEffectsEnabled) {
      areHardVHSEffectsEnabled = false;
      hardButton.textContent = 'HARD VHS OFF';
      vhsEffect.classList.remove('hard-vhs');
    }
    
    vhsEffect.style.display = 'block';
    button.textContent = 'VHS ON';
    areVHSEffectsEnabled = true;
    
    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—ã—á–Ω—ã–µ VHS —ç—Ñ—Ñ–µ–∫—Ç—ã
    document.querySelectorAll('.vhs-line').forEach(line => {
      line.style.animation = 'vhs-lines 2s infinite linear';
    });
    document.querySelector('.vhs-glitch').style.animation = 'vhs-glitch 1s infinite steps(5)';
  }
}

function toggleHardVHSEffects() {
  const vhsEffect = document.getElementById('vhs-effect');
  const button = document.getElementById('hard-vhs-btn');
  const normalButton = document.getElementById('vhs-toggle-btn');

  if (areHardVHSEffectsEnabled) {
    // –û—Ç–∫–ª—é—á–∞–µ–º Hard VHS —ç—Ñ—Ñ–µ–∫—Ç—ã
    vhsEffect.classList.remove('hard-vhs');
    button.textContent = 'HARD VHS OFF';
    areHardVHSEffectsEnabled = false;
    
    // –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ VHS —ç—Ñ—Ñ–µ–∫—Ç—ã
    vhsEffect.style.display = 'none';
    normalButton.textContent = 'VHS OFF';
    areVHSEffectsEnabled = false;
  } else {
    // –ï—Å–ª–∏ –≤–∫–ª—é—á–∞–µ–º Hard VHS, –≤—ã–∫–ª—é—á–∞–µ–º –æ–±—ã—á–Ω—ã–π VHS
    if (areVHSEffectsEnabled) {
      areVHSEffectsEnabled = false;
      normalButton.textContent = 'VHS OFF';
    }
    
    vhsEffect.style.display = 'block';
    vhsEffect.classList.add('hard-vhs');
    button.textContent = 'HARD VHS ON';
    areHardVHSEffectsEnabled = true;
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã Hard VHS
    document.querySelectorAll('.vhs-line').forEach(line => {
      line.style.animation = 'hard-vhs-lines 0.5s infinite linear';
    });
    document.querySelector('.vhs-glitch').style.animation = 'vhs-glitch 0.25s infinite steps(5)';
  }
}

function moveCamera() {
  const slider = document.getElementById('camera-slider');
  const movableBackground = document.getElementById('movable-background');
  
  // –ü–µ—Ä–µ–º–µ—â–∞–µ–º —Ñ–æ–Ω –∏ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
  movableBackground.style.transform = `translateX(${-slider.value}px)`;
}

let isPlayerResized = false;

function resizeTwitchPlayer() {
  const player = document.getElementById('twitch-player');
  const iframe = document.getElementById('twitch-iframe');
  if (isPlayerResized) {
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä
    player.style.width = '640px';
    player.style.height = '360px';
    player.style.top = '10%';
    iframe.width = '640';
    iframe.height = '360';
    isPlayerResized = false;
  } else {
    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –≤ –¥–≤–∞ —Ä–∞–∑–∞
    player.style.width = '1280px';
    player.style.height = '720px';
    player.style.top = '10%';
    iframe.width = '1280';
    iframe.height = '720';
    isPlayerResized = true;
  }
}

// –§—É–Ω–∫—Ü–∏—è surviveGame
function surviveGame() {
  document.getElementById('survived-layer').style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–æ–π survived
  document.getElementById('reset-surv').style.display = 'block'; // Ensure RESET button is visible
  clearInterval(gameInterval); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–≥—Ä—É
  clearInterval(freddyInterval); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –§—Ä–µ–¥–¥–∏
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –∑–≤—É–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', () => {
  drummingSound.loop = true; // –ó–∞—Ü–∏–∫–ª–∏–≤–∞–µ–º –∑–≤—É–∫
  drummingSound.volume = 0.4; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å
  drummingSound.play();
  
});

// –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ start-layer
document.getElementById('start-layer').addEventListener('transitionend', () => {
  if (!gameStarted) {
    drummingSound.pause();
    drummingSound.currentTime = 0; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Ä–µ–º—è
  }
});

// –ó–∞—Ü–∏–∫–ª–∏–≤–∞–µ–º –∑–≤—É–∫ "sound/DrummingSticks.ogg", –∫–æ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è start-layer
document.getElementById('start-layer').addEventListener('transitionend', () => {
  if (document.getElementById('start-layer').style.display !== 'none') {
    drummingSound.loop = true;
    drummingSound.play();
  }
});
</script>
</body>
</html> 
